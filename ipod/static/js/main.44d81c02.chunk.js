(this["webpackJsonpipod-classic"]=this["webpackJsonpipod-classic"]||[]).push([[0],{48:function(e,t,n){"use strict";n.r(t);var i,r,a,o,c,s,l,u,d,p,b,h,f,j,v,x,O,g,m,w,y,k,S,C,M,P,T,A,E,I,L,z,N,R,W,_,U,H,X,F,B,V,D=n(28),G=n.n(D),Y=n(3),K=n(1),Q=n(5),J=n(0),q=function(){return Object(J.jsxs)("svg",{width:"95",height:"124",viewBox:"0 0 95 124",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(J.jsx)("path",{d:"M4 2L92 2",stroke:"black",strokeWidth:"4"}),Object(J.jsx)("path",{d:"M16 14L80 14",stroke:"black",strokeWidth:"4"}),Object(J.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 4H4V12V64V104H16H80H91V64V12V4H80H16ZM80 12H16V64H80V12Z",fill:"#C4C4C4"}),Object(J.jsx)("rect",{x:"16",y:"16",width:"64",height:"48",fill:"#CBCCFE"}),Object(J.jsx)("path",{d:"M93 104L93 3.99999",stroke:"black",strokeWidth:"4"}),Object(J.jsx)("path",{d:"M2 104L2 4",stroke:"black",strokeWidth:"4"}),Object(J.jsx)("path",{d:"M14 64L14 16",stroke:"black",strokeWidth:"4"}),Object(J.jsx)("path",{d:"M82 64L82 16",stroke:"white",strokeWidth:"4"}),Object(J.jsx)("path",{d:"M30 32V24",stroke:"black",strokeWidth:"4"}),Object(J.jsx)("path",{d:"M66 32V24",stroke:"black",strokeWidth:"4"}),Object(J.jsx)("path",{d:"M50 44L50 24",stroke:"black",strokeWidth:"4"}),Object(J.jsx)("path",{d:"M49 42H44",stroke:"black",strokeWidth:"4"}),Object(J.jsx)("path",{d:"M60 54H36",stroke:"black",strokeWidth:"4"}),Object(J.jsx)("path",{d:"M64 58H60",stroke:"black",strokeWidth:"4"}),Object(J.jsx)("path",{d:"M36 58H32",stroke:"black",strokeWidth:"4"}),Object(J.jsx)("path",{d:"M80 86H48",stroke:"black",strokeWidth:"4"}),Object(J.jsx)("g",{filter:"url(#filter0_d)",children:Object(J.jsx)("path",{d:"M20 94H12",stroke:"#18AB1C",strokeWidth:"4"})}),Object(J.jsx)("g",{filter:"url(#filter1_d)",children:Object(J.jsx)("path",{d:"M20 98H12",stroke:"#BF4131",strokeWidth:"4"})}),Object(J.jsx)("path",{d:"M80 90H48",stroke:"white",strokeWidth:"4"}),Object(J.jsx)("rect",{x:"4",y:"104",width:"88",height:"20",fill:"black"}),Object(J.jsx)("rect",{x:"8",y:"108",width:"44",height:"4",fill:"#575757"}),Object(J.jsx)("rect",{x:"44",y:"108",width:"44",height:"4",fill:"#222222"}),Object(J.jsx)("rect",{x:"64",y:"112",width:"24",height:"4",fill:"#222222"}),Object(J.jsx)("rect",{x:"76",y:"116",width:"12",height:"4",fill:"#222222"}),Object(J.jsx)("rect",{x:"8",y:"112",width:"32",height:"4",fill:"#575757"}),Object(J.jsx)("rect",{x:"8",y:"116",width:"44",height:"4",fill:"#575757"}),Object(J.jsx)("rect",{x:"40",y:"112",width:"24",height:"4",fill:"#444444"}),Object(J.jsx)("path",{d:"M16 66L80 66",stroke:"white",strokeWidth:"4"}),Object(J.jsxs)("defs",{children:[Object(J.jsxs)("filter",{id:"filter0_d",x:"4",y:"84",width:"24",height:"20",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[Object(J.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),Object(J.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),Object(J.jsx)("feOffset",{}),Object(J.jsx)("feGaussianBlur",{stdDeviation:"4"}),Object(J.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.690196 0 0 0 0 0.952941 0 0 0 0 0.658824 0 0 0 1 0"}),Object(J.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow"}),Object(J.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow",result:"shape"})]}),Object(J.jsxs)("filter",{id:"filter1_d",x:"4",y:"88",width:"24",height:"20",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[Object(J.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),Object(J.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),Object(J.jsx)("feOffset",{}),Object(J.jsx)("feGaussianBlur",{stdDeviation:"4"}),Object(J.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.964706 0 0 0 0 0.745098 0 0 0 0 0.72549 0 0 0 1 0"}),Object(J.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow"}),Object(J.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow",result:"shape"})]})]})]})},Z=n(4),$={XS:{MediaQuery:"@media (min-width: 0)",Size:{Min:0,Max:575},ContainerMaxWidth:"100%"},SM:{MediaQuery:"@media (min-width: 576px)",Size:{Min:576,Max:767},ContainerMaxWidth:"540px"},MD:{MediaQuery:"@media (min-width: 768px)",Size:{Min:768,Max:991},ContainerMaxWidth:"720px"},LG:{MediaQuery:"@media (min-width: 992px)",Size:{Min:992,Max:1199},ContainerMaxWidth:"960px"},XL:{MediaQuery:"@media (min-width: 1200px)",Size:{Min:1200,Max:null},ContainerMaxWidth:"1140px"}},ee={XXXL:"8rem",XXL:"4rem",XL:"2rem",LG:"1.5rem",MD:"1rem",SM:"0.75rem",XS:"0.5rem",XXS:"0.25rem"},te=Z.c.div(i||(i=Object(Y.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  text-align: center;\n  height: 100%;\n"]))),ne=Z.c.p(r||(r=Object(Y.a)(["\n  margin-top: ",";\n  font-size: 14px;\n  max-width: 180px;\n  color: rgb(100, 100, 100);\n"])),ee.MD),ie="Something went wrong",re=function(e){var t=e.message,n=e.showImage,i=void 0===n||n;return Object(J.jsx)(te,{children:Object(J.jsxs)("div",{children:[i&&Object(J.jsx)(q,{}),Object(J.jsx)(ne,{children:null!==t&&void 0!==t?t:ie})]})})},ae=n(50),oe=n(9),ce=n(7),se=n.n(ce),le=n(8),ue=n(6),de=function(e,t){if(t)return t.replace("{w}","".concat(e)).replace("{h}","".concat(e))},pe=function(e){var t,n,i,r,a,o,c,s,l,u,d,p;return{id:e.id,name:null!==(t=null===(n=e.attributes)||void 0===n?void 0:n.name)&&void 0!==t?t:"Unknown name",url:null!==(i=e.href)&&void 0!==i?i:"",artwork:{url:null!==(r=de(100,null===(a=e.attributes)||void 0===a||null===(o=a.artwork)||void 0===o?void 0:o.url))&&void 0!==r?r:""},albumName:null===(c=e.attributes)||void 0===c?void 0:c.albumName,artistName:null===(s=e.attributes)||void 0===s?void 0:s.artistName,duration:null!==(l=null===(u=e.attributes)||void 0===u?void 0:u.durationInMillis)&&void 0!==l?l:0,trackNumber:null!==(d=null===(p=e.attributes)||void 0===p?void 0:p.trackNumber)&&void 0!==d?d:0}},be=function(e){var t,n,i,r,a,o,c,s,l,u,d,p,b,h;return{id:e.id,name:null!==(t=null===(n=e.attributes)||void 0===n?void 0:n.name)&&void 0!==t?t:"\u2013",url:null!==(i=null===(r=e.attributes)||void 0===r?void 0:r.url)&&void 0!==i?i:"",curatorName:null!==(a=null===(o=e.attributes)||void 0===o?void 0:o.curatorName)&&void 0!==a?a:"",artwork:{url:null!==(c=de(100,null===(s=e.attributes)||void 0===s||null===(l=s.artwork)||void 0===l?void 0:l.url))&&void 0!==c?c:""},description:null===(u=e.attributes)||void 0===u||null===(d=u.description)||void 0===d?void 0:d.standard,songs:null!==(p=null===(b=e.relationships)||void 0===b||null===(h=b.tracks)||void 0===h?void 0:h.data.map(pe))&&void 0!==p?p:[]}},he=function(e){var t,n,i,r;return{id:e.id,name:e.name,curatorName:null!==(t=e.owner.display_name)&&void 0!==t?t:"",url:e.uri,artwork:{url:null!==(n=null===(i=e.images[0])||void 0===i?void 0:i.url)&&void 0!==n?n:""},description:null!==(r=e.description)&&void 0!==r?r:"",songs:[]}},fe=function(e){var t,n,i,r;return{id:e.uri,name:e.name,curatorName:null!==(t=e.owner.display_name)&&void 0!==t?t:"",url:e.uri,artwork:{url:null!==(n=null===(i=e.images[0])||void 0===i?void 0:i.url)&&void 0!==n?n:""},description:null!==(r=e.description)&&void 0!==r?r:"",songs:e.tracks.items.map((function(e){return function(e){var t,n;return{id:e.id,name:e.name,url:e.uri,artwork:{url:null!==(t=null===(n=e.album.images[0])||void 0===n?void 0:n.url)&&void 0!==t?t:""},albumName:e.album.name,artistName:e.artists.map((function(e){return e.name})).join(", "),duration:e.duration_ms,trackNumber:e.track_number}}(e.track)}))}},je=function(e,t){var n,i,r,a,o,c,s,l,u,d;return{id:e.id,name:null!==(n=null===(i=e.attributes)||void 0===i?void 0:i.name)&&void 0!==n?n:"\u2013",artistName:null===(r=e.attributes)||void 0===r?void 0:r.artistName,url:null!==(a=null===(o=e.attributes)||void 0===o?void 0:o.url)&&void 0!==a?a:"",artwork:{url:null!==(c=de(null!==t&&void 0!==t?t:100,null===(s=e.attributes)||void 0===s||null===(l=s.artwork)||void 0===l?void 0:l.url))&&void 0!==c?c:""},songs:null!==(u=null===(d=e.relationships)||void 0===d?void 0:d.tracks.data.map(pe))&&void 0!==u?u:[]}},ve=function(e){var t,n;return{id:e.id,name:e.name,artistName:e.artists.map((function(e){return e.name})).join(", "),url:e.uri,artwork:{url:null!==(t=null===(n=e.images[0])||void 0===n?void 0:n.url)&&void 0!==t?t:""},songs:[]}},xe=function(e){var t,n;return{id:e.id,name:e.name,artistName:e.artists.map((function(e){return e.name})).join(", "),url:e.uri,artwork:{url:null!==(t=null===(n=e.images[0])||void 0===n?void 0:n.url)&&void 0!==t?t:""},songs:e.tracks.items.map((function(e){return function(e){return{id:e.id,name:e.name,url:e.uri,artistName:e.artists.map((function(e){return e.name})).join(", "),duration:e.duration_ms,trackNumber:e.track_number}}(e)}))}},Oe=function(e){var t,n,i,r,a,o,c;return{id:e.id,name:null!==(t=null===(n=e.attributes)||void 0===n?void 0:n.name)&&void 0!==t?t:"\u2013",url:null!==(i=null===(r=e.attributes)||void 0===r?void 0:r.url)&&void 0!==i?i:"",artwork:void 0,albums:null!==(a=null===(o=e.relationships)||void 0===o||null===(c=o.albums)||void 0===c?void 0:c.data.map(je))&&void 0!==a?a:[]}},ge=function(e){var t;return{id:e.id,name:e.name,url:e.uri,artwork:{url:null===(t=e.images[0])||void 0===t?void 0:t.url}}},me=function(e){var t;return{albumName:e.albumName,artistName:e.artistName,artwork:{url:null!==(t=de(100,e.artworkURL))&&void 0!==t?t:""},duration:e.playbackDuration,id:e.id,name:e.title,trackNumber:e.trackNumber,url:""}},we=function(e){var t,n,i,r=e.track_window.current_track;return{albumName:r.album.name,artistName:r.artists.map((function(e){return e.name})).join(", "),artwork:{url:null!==(t=null===(n=r.album.images[0])||void 0===n?void 0:n.url)&&void 0!==t?t:""},duration:e.duration,id:null!==(i=r.id)&&void 0!==i?i:"",name:r.name,trackNumber:0,url:r.uri}},ye=Object(K.createContext)({}),ke=function(e){var t=e.children,n=Ci(),i=n.service,r=n.isSpotifyAuthorized,a=n.isAppleAuthorized,o=Oi(),c=o.spotifyPlayer,s=o.accessToken,l=o.deviceId,u=Te().music,d=Object(K.useState)(.5),p=Object(Q.a)(d,2),b=p[0],h=p[1],f=Object(K.useState)(),j=Object(Q.a)(f,2),v=j[0],x=j[1],O=Object(K.useState)({isPlaying:!1,isPaused:!1,isLoading:!1,currentTime:0,timeRemaining:0,percent:0,duration:0}),g=Object(Q.a)(O,2),m=g[0],w=g[1],y=Object(K.useCallback)(function(){var e=Object(le.a)(se.a.mark((function e(t){var n,i,r,o;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}throw new Error("Unable to play: Not authorized");case 2:return e.next=4,u.setQueue({album:null===(n=t.album)||void 0===n?void 0:n.id,playlist:null===(i=t.playlist)||void 0===i?void 0:i.id,songs:null===(r=t.songs)||void 0===r?void 0:r.map((function(e){return e.url})),song:null===(o=t.song)||void 0===o?void 0:o.id,startPosition:t.startPosition?t.startPosition-1:void 0});case 4:return e.next=6,u.play();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[a,u]),k=Object(K.useCallback)(function(){var e=Object(le.a)(se.a.mark((function e(t){var n,i,a,o,c,u,d,p,b,h;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}throw new Error("Unable to play: Not authorized");case 2:return h=[].concat(Object(oe.a)(null!==(n=null===(i=t.album)||void 0===i||null===(a=i.songs)||void 0===a?void 0:a.map((function(e){return e.url})))&&void 0!==n?n:[]),Object(oe.a)(null!==(o=null===(c=t.playlist)||void 0===c||null===(u=c.songs)||void 0===u?void 0:u.map((function(e){return e.url})))&&void 0!==o?o:[]),Object(oe.a)(null!==(d=null===(p=t.songs)||void 0===p?void 0:p.map((function(e){return e.url})))&&void 0!==d?d:[]),[null===(b=t.song)||void 0===b?void 0:b.url]).filter((function(e){return!!e})),w((function(e){return Object(ue.a)(Object(ue.a)({},e),{},{isLoading:!0})})),e.next=6,fetch("https://api.spotify.com/v1/me/player/play?device_id=".concat(l),{method:"PUT",body:JSON.stringify({uris:h,offset:{position:t.startPosition}}),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}});case 6:w((function(e){return Object(ue.a)(Object(ue.a)({},e),{},{isLoading:!1})}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[s,l,r]),S=Object(K.useCallback)(function(){var e=Object(le.a)(se.a.mark((function e(t){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=i,e.next="apple"===e.t0?3:"spotify"===e.t0?4:5;break;case 3:return e.abrupt("return",y(t));case 4:return e.abrupt("return",k(t));case 5:throw new Error("Unable to play: service not specified");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[y,k,i]),C=Object(K.useCallback)(Object(le.a)(se.a.mark((function e(){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=i,e.next="apple"===e.t0?3:"spotify"===e.t0?4:5;break;case 3:return e.abrupt("return",c.pause());case 4:return e.abrupt("return",u.pause());case 5:throw new Error("Unable to play: service not specified");case 6:case"end":return e.stop()}}),e)}))),[u,i,c]),M=Object(K.useCallback)(Object(le.a)(se.a.mark((function e(){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v){e.next=2;break}return e.abrupt("return");case 2:e.t0=i,e.next="apple"===e.t0?5:"spotify"===e.t0?11:12;break;case 5:if(!u.player.isPlaying){e.next=9;break}return e.abrupt("return",u.pause());case 9:u.player.isPlaying||u.play();case 10:return e.abrupt("break",13);case 11:return e.abrupt("return",c.togglePlay());case 12:throw new Error("Unable to play: service not specified");case 13:case"end":return e.stop()}}),e)}))),[u,v,i,c]),P=Object(K.useCallback)(Object(le.a)(se.a.mark((function e(){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v){e.next=2;break}return e.abrupt("return");case 2:w((function(e){return Object(ue.a)(Object(ue.a)({},e),{},{isLoading:!0})})),e.t0=i,e.next="apple"===e.t0?6:"spotify"===e.t0?10:13;break;case 6:if(!u.player.nowPlayingItem){e.next=9;break}return e.next=9,u.skipToNextItem();case 9:return e.abrupt("break",14);case 10:return e.next=12,c.nextTrack();case 12:return e.abrupt("break",14);case 13:throw new Error("Unable to play: service not specified");case 14:w((function(e){return Object(ue.a)(Object(ue.a)({},e),{},{isLoading:!1})}));case 15:case"end":return e.stop()}}),e)}))),[u,v,i,c]),T=Object(K.useCallback)(Object(le.a)(se.a.mark((function e(){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v){e.next=2;break}return e.abrupt("return");case 2:w((function(e){return Object(ue.a)(Object(ue.a)({},e),{},{isLoading:!0})})),e.t0=i,e.next="apple"===e.t0?6:"spotify"===e.t0?10:13;break;case 6:if(!u.player.nowPlayingItem){e.next=9;break}return e.next=9,u.skipToPreviousItem();case 9:return e.abrupt("break",14);case 10:return e.next=12,c.previousTrack();case 12:return e.abrupt("break",14);case 13:throw new Error("Unable to play: service not specified");case 14:w((function(e){return Object(ue.a)(Object(ue.a)({},e),{},{isLoading:!1})}));case 15:case"end":return e.stop()}}),e)}))),[u,v,i,c]),A=Object(K.useCallback)(Object(le.a)(se.a.mark((function e(){var t,n;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("apple"!==i||!u.player.nowPlayingItem){e.next=4;break}t=me(u.player.nowPlayingItem),e.next=9;break;case 4:if("spotify"!==i){e.next=9;break}return e.next=7,c.getCurrentState();case 7:(n=e.sent)&&(t=we(n));case 9:x(t);case 10:case"end":return e.stop()}}),e)}))),[u.player.nowPlayingItem,i,c]),E=Object(K.useCallback)((function(e){var t=e.state,n=!1,i=!1,r=!1;switch(t){case MusicKit.PlaybackStates.playing:i=!0;break;case MusicKit.PlaybackStates.paused:r=!0;break;case MusicKit.PlaybackStates.loading:case MusicKit.PlaybackStates.waiting:case MusicKit.PlaybackStates.stalled:n=!0}w((function(e){return Object(ue.a)(Object(ue.a)({},e),{},{isPlaying:i,isPaused:r,isLoading:n})})),A()}),[A]),I=Object(K.useCallback)((function(e){e.disallows.resuming?w((function(e){return Object(ue.a)(Object(ue.a)({},e),{},{isPlaying:!0,isPaused:!1,isLoading:!1})})):e.paused&&w((function(e){return Object(ue.a)(Object(ue.a)({},e),{},{isPlaying:!1,isPaused:!0,isLoading:!1})})),A()}),[A]),L=Object(K.useCallback)(Object(le.a)(se.a.mark((function e(){var t,n,r,a,o,s,l;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("apple"!==i){e.next=4;break}w((function(e){return Object(ue.a)(Object(ue.a)({},e),{},{currentTime:u.player.currentPlaybackTime,timeRemaining:u.player.currentPlaybackTimeRemaining,percent:100*u.player.currentPlaybackProgress,duration:u.player.currentPlaybackDuration})})),e.next=13;break;case 4:if("spotify"!==i){e.next=13;break}return e.next=7,c.getCurrentState();case 7:r=e.sent,a=(null!==(t=null===r||void 0===r?void 0:r.position)&&void 0!==t?t:0)/1e3,o=(null!==(n=null===r||void 0===r?void 0:r.duration)&&void 0!==n?n:0)/1e3,s=o-a,l=Math.round(a/o*100),w((function(e){return Object(ue.a)(Object(ue.a)({},e),{},{currentTime:a,timeRemaining:s,percent:l,duration:o})}));case 13:case"end":return e.stop()}}),e)}))),[u.player,i,c]),z=Object(K.useCallback)(function(){var e=Object(le.a)(se.a.mark((function e(t){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("apple"!==i){e.next=5;break}return e.next=3,u.player.seekToTime(t);case 3:e.next=8;break;case 5:if("spotify"!==i){e.next=8;break}return e.next=8,c.seek(1e3*t);case 8:L();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[u.player,i,c,L]),N=Object(K.useCallback)((function(e){r&&c.setVolume(e),a&&(u.player.volume=e),localStorage.setItem(ki,"".concat(e)),h(e)}),[a,r,u.player,c]);return Ie("playpauseclick",(function(){M()})),Ie("forwardclick",(function(){P()})),Ie("backclick",(function(){T()})),Ee("playbackStateDidChange",E),Ee("queuePositionDidChange",A),Object(K.useEffect)((function(){if(r){var e;c.addListener("player_state_changed",I);var t=parseFloat(null!==(e=localStorage.getItem(ki))&&void 0!==e?e:"0.5");return N(t),function(){return c.removeListener("player_state_changed",I)}}}),[N,I,r,c]),Object(K.useEffect)((function(){if(a){var e,t=parseFloat(null!==(e=localStorage.getItem(ki))&&void 0!==e?e:"0.5");N(t)}}),[N,a]),Object(J.jsx)(ye.Provider,{value:{playbackInfo:m,nowPlayingItem:v,volume:b,play:S,pause:C,seekToTime:z,setVolume:N,updateNowPlayingItem:A,updatePlaybackInfo:L},children:t})},Se=function(){var e=Object(K.useContext)(ye);return Object(ue.a)({},e)},Ce=function(){var e=Se(),t=e.volume,n=e.setVolume,i=Object(K.useState)(!1),r=Object(Q.a)(i,2),a=r[0],o=r[1],c=Object(K.useState)(!0),s=Object(Q.a)(c,2),l=s[0],u=s[1],d=Object(K.useRef)();Ti((function(){return function(){d.current&&clearTimeout(d.current)}}));var p=Object(K.useCallback)((function(e){!e&&d.current?(o(!1),u(!1),clearTimeout(d.current)):(o(!1),u(!0),clearTimeout(d.current))}),[]),b=Object(K.useCallback)((function(){l&&(o(!0),d.current&&clearTimeout(d.current),d.current=setTimeout((function(){o(!1)}),3e3))}),[l]),h=Object(K.useCallback)((function(){if(b(),1!==t&&l){var e=Math.min(t+.04,1);n(e)}}),[b,t,l,n]),f=Object(K.useCallback)((function(){if(b(),l){var e=Math.max(t-.04,.01);n(e)}}),[b,t,l,n]);return Ie("forwardscroll",h),Ie("backwardscroll",f),Ie("wheelclick",(function(){return o(!1)})),{setEnabled:p,volume:t,active:a}},Me="eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IlJHWFFEWThYM0MifQ.eyJpYXQiOjE2MTY4ODQ1MDksImV4cCI6MTYzMjQzNjUwOSwiaXNzIjoiRzZIM0NLV005QyJ9.z7NS-8962oumCEaYOUMJfzonO2Y2tAWb_vAF_wwOkDqU8BoWTo6xDg5uG8ZvFeFpMqRoMbBaB_Mr4sxpvJzjPg",Pe=Object(K.createContext)({}),Te=function(){var e=window.MusicKit,t=Ci(),n=t.setIsAppleAuthorized,i=t.isSpotifyAuthorized,r=t.setService,a=Object(K.useContext)(Pe),o=a.isConfigured,c=a.hasDevToken,s=Object(K.useMemo)((function(){return o&&c?window.MusicKit.getInstance():{}}),[c,o]),l=Object(K.useCallback)(Object(le.a)(se.a.mark((function e(){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.isAuthorized){e.next=3;break}return e.next=3,s.authorize();case 3:r("apple");case 4:case"end":return e.stop()}}),e)}))),[s,r]),u=Object(K.useCallback)((function(){s.unauthorize(),n(!1),r(i?"spotify":void 0)}),[i,s,n,r]);return{isConfigured:o,hasDevToken:c,musicKit:e,music:s,signIn:l,signOut:u}},Ae=function(e){var t=e.children,n=window.MusicKit,i=Object(K.useState)(!1),r=Object(Q.a)(i,2),a=r[0],o=r[1],c=Object(K.useState)(!1),s=Object(Q.a)(c,2),l=s[0],u=s[1],d=Ci(),p=d.setIsAppleAuthorized,b=d.setService;return Object(K.useEffect)((function(){try{var e,t=n.configure({developerToken:null!==(e=Me)?e:void 0,app:{name:"iPod.js",build:"1.0"}});t&&o(!0),t.isAuthorized&&p(!0)}catch(i){o(!1)}}),[n,p]),Ee("userTokenDidChange",(function(e){e.userToken?(p(!0),b("apple")):(p(!1),b(void 0))})),Ie("musickitconfigured",(function(){u(!0)})),Object(J.jsx)(Pe.Provider,{value:{musicKit:n,isConfigured:l,hasDevToken:a},children:l?t:Object(J.jsx)(re,{message:"Missing Apple developer token"})})},Ee=function(e,t){Object(K.useEffect)((function(){var n=window.MusicKit;if(!n.errors.length){var i=n.getInstance();return i.addEventListener(e,t),function(){i.removeEventListener(e,t)}}}),[t,e])},Ie=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,i=Object(K.useRef)();Object(K.useEffect)((function(){i.current=t}),[e,t]),Object(K.useEffect)((function(){if(n&&n.addEventListener){var t=function(e){return i&&i.current&&i.current(e)};return n.addEventListener(e,t),function(){n.removeEventListener(e,t)}}}),[e,n])},Le=function(e){var t=ci(),n=t.windowStack,i=t.hideWindow,r=Object(K.useCallback)((function(){n[n.length-1].id===e&&i()}),[i,e,n]);Ie("menuclick",r)},ze=Z.c.div(a||(a=Object(Y.a)(["\n  display: flex;\n  flex-direction: column;\n"]))),Ne=Z.c.img(o||(o=Object(Y.a)(["\n  height: ",";\n  width: auto;\n  margin: ",";\n"])),ee.XL,ee.XS),Re=Z.c.div(c||(c=Object(Y.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: "," "," 0;\n"])),ee.MD,ee.MD),We=Z.c.h3(s||(s=Object(Y.a)(["\n  margin: 0;\n  font-size: 16px;\n  font-weight: 900;\n"]))),_e=Z.c.h3(l||(l=Object(Y.a)(["\n  margin: 0 0 ",";\n  font-size: 14px;\n  font-weight: normal;\n  text-align: center;\n"])),ee.MD),Ue=Z.c.div(u||(u=Object(Y.a)(["\n  flex: 1;\n"]))),He=function(){Le(ni.about.id);var e=[{type:"Link",label:"GitHub Repo",url:"https://github.com/tvillarete/ipod-classic-js"},{type:"Link",label:"My Website",url:"http://tannerv.com"},{type:"Link",label:"LinkedIn",url:"https://linkedin.com/in/tvillarete"}],t=ri(ni.about.id,e),n=Object(Q.a)(t,1)[0];return Object(J.jsx)(ze,{children:Object(J.jsxs)(Ue,{children:[Object(J.jsxs)(Re,{children:[Object(J.jsx)(Ne,{alt:"iPod",src:"ipod_logo.svg"}),Object(J.jsx)(We,{children:"iPod.js"})]}),Object(J.jsxs)(_e,{children:["Made with"," ",Object(J.jsx)("span",{"aria-label":"heart",role:"img",children:"\u2764\ufe0f"})," ","by Tanner Villarete"]}),Object(J.jsx)(Xi,{options:e,activeIndex:n})]})})},Xe={variants:{closed:{x:"100%"},open:{x:0,transition:{duration:.3,type:"tween"}},closing:{x:"100%",transition:{duration:.3,type:"tween"}}},initial:"closed",animate:"open",exit:"closing"},Fe={variants:{closed:{y:"110%"},open:{y:0,transition:{duration:.3,type:"tween"}},closing:{y:"110%",transition:{duration:.3,type:"tween"}}},initial:"closed",animate:"open",exit:"closing"},Be={variants:{closed:{scale:.6,opacity:0},open:{scale:1,opacity:1,transition:{duration:.3,type:"spring"}},closing:{scale:.6,opacity:0,transition:{duration:.3,type:"spring"}}},initial:"closed",animate:"open",exit:"closing"},Ve={variants:{closed:{opacity:0},open:{opacity:1},closing:{opacity:0,transition:{duration:.3,type:"tween"}}},initial:"closed",animate:"open",exit:"closing"},De={variants:{closed:{opacity:0,scale:.3},open:{opacity:1,scale:1,transition:{duration:.5,type:"tween"}},closing:{opacity:0,scale:.3,transition:{duration:.3,type:"tween"}}},initial:"closed",animate:"open",exit:"closing"},Ge={variants:{closed:{x:"130%",opacity:0},open:{x:0,opacity:1,transition:{duration:.4,type:"tween"}},closing:{x:"130%",opacity:0,transition:{duration:.4,type:"tween"}}},initial:"closed",animate:"open",exit:"closing"},Ye={variants:{closed:{},open:{},closing:{opacity:0,transition:{duration:.3,type:"tween"}}},initial:"closed",animate:"open",exit:"closing"},Ke=n(49),Qe=n(15),Je=function(e,t){if(t)return t.replace("{w}","".concat(e)).replace("{h}","".concat(e))},qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=Math.floor(e%60),i=Math.floor(e/60%60),r=Math.floor(e/3600),a=Math.floor(t/60%60),o=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(r=i=n="-"),(r=r>0||o>0?"".concat(r,":"):"")+(i="".concat((r||a>=10)&&i<10?"0".concat(i):i,":"))+(n=n<10?"0".concat(n):n)},Ze=function(e,t){var n=window.MusicKit.getInstance();return[{type:"Action",label:"Play Next",onSelect:function(){return n.playNext(Object(Qe.a)({},e,t))}},{type:"Action",label:"Play Later",onSelect:function(){return n.playLater(Object(Qe.a)({},e,t))}}]},$e=Z.c.div(d||(d=Object(Y.a)(["\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n  top: -28%;\n  bottom: -50%;\n  left: -50%;\n  right: -50%;\n  border: 1px solid lightgray;\n  background: white;\n  transform: rotateY(180deg);\n"]))),et=Z.c.div(p||(p=Object(Y.a)(["\n  padding: 4px 8px;\n  background: linear-gradient(180deg, #6585ad 0%, #789ab3 100%);\n  border-bottom: 1px solid #6d87a3;\n"]))),tt=Z.c.h3(b||(b=Object(Y.a)(["\n  font-size: 16px;\n  margin: 0;\n  color: white;\n"]))),nt=Object(Z.c)(tt)(h||(h=Object(Y.a)(["\n  font-size: 14px;\n"]))),it=Z.c.div(f||(f=Object(Y.a)(["\n  position: relative;\n  flex: 1;\n  overflow: auto;\n"]))),rt=function(e){var t=e.albumId,n=e.setPlayingAlbum,i=Pi({name:"album",id:t,inLibrary:!0}),r=i.data,a=i.isLoading,o=Object(K.useMemo)((function(){var e;return null!==(e=null===r||void 0===r?void 0:r.songs.map((function(e,t){return{type:"Song",label:e.name,queueOptions:{album:r,startPosition:t}}})))&&void 0!==e?e:[]}),[r]),c=ri(ii.coverFlow.id,o),s=Object(Q.a)(c,1)[0];return Ie("centerclick",(function(){return n(!0)})),Object(J.jsx)($e,{children:a?Object(J.jsx)(Sr,{}):Object(J.jsxs)(J.Fragment,{children:[Object(J.jsxs)(et,{children:[Object(J.jsx)(tt,{children:null===r||void 0===r?void 0:r.name}),Object(J.jsx)(nt,{children:null===r||void 0===r?void 0:r.artistName})]}),Object(J.jsx)(it,{children:Object(J.jsx)(Xi,{activeIndex:s,options:o})})]})})},at=Z.c.div.attrs((function(e){return{style:{background:"transparent",backgroundSize:"cover"}}}))(j||(j=Object(Y.a)(["\n  z-index: ",";\n  position: absolute;\n  height: 8em;\n  width: 8em;\n  transition: transform 0.25s, opacity 0.35s, background 0.35s;\n  transform-style: preserve-3d;\n  -webkit-box-reflect: below 0px -webkit-gradient(linear, left top, left bottom, from(transparent), color-stop(70%, transparent), to(rgba(240, 240, 240, 0.2)));\n  opacity: ",";\n\n  ",";\n\n  ",";\n"])),(function(e){return 1-Math.abs(e.index-e.activeIndex)}),(function(e){return e.isHidden&&0}),(function(e){return e.isActive&&Object(Z.b)(v||(v=Object(Y.a)(["\n      transition: transform 0.3s, opacity 0.35s, background 0.35s;\n      transform: translate3d(","px, 4px, 20px)\n        ",";\n\n      ",";\n\n      ",";\n    "])),e.midpoint.x-60,e.isSelected&&"rotateY(-180deg) translateY(10%) scale(0.96)",e.isSelected&&Object(Z.b)(x||(x=Object(Y.a)(["\n        transition: transform 0.5s, opacity 0.35s, background 0.35s;\n        -webkit-box-reflect: none;\n\n        "," {\n          opacity: 0;\n        }\n      "])),ot),e.isPlaying&&Object(Z.b)(O||(O=Object(Y.a)(["\n        transform: translate(","px, -10px) rotateY(18deg);\n\n        "," {\n          opacity: 1;\n        }\n      "])),e.midpoint.x-135,ot))}),(function(e){return!e.isActive&&Object(Z.b)(g||(g=Object(Y.a)(["\n      transform: translateX(","px) scale(1.1) translateZ(-65px)\n        rotateY(",");\n    "])),e.offset,e.index<e.activeIndex?"70deg":"-70deg")})),ot=Z.c.img(m||(m=Object(Y.a)(["\n  z-index: 0;\n  position: absolute;\n  height: 8em;\n  width: 8em;\n  transition: opacity 0.5s;\n"]))),ct=Object(Z.c)(Ke.a.div)(w||(w=Object(Y.a)(["\n  position: relative;\n  height: 100%;\n  width: 100%;\n"]))),st=function(e){var t,n=e.album,i=e.midpoint,r=e.index,a=e.activeIndex,o=e.isSelected,c=e.playingAlbum,s=e.setPlayingAlbum,l=r>a-15&&r<a+15,u=r===a,d=function(e,t){return 0===e?0:t-46+48*e+(e<0?-48:24)}(r-a,i.x),p=!u&&c;return l?Object(J.jsxs)(at,{isActive:u,isSelected:o,isHidden:p,midpoint:i,offset:d,index:r,activeIndex:a,isPlaying:o&&c,children:[Object(J.jsx)(ot,{src:Je(300,null===(t=n.artwork)||void 0===t?void 0:t.url)}),Object(J.jsx)(ae.a,{children:o&&!c&&Object(J.jsx)(ct,Object(ue.a)(Object(ue.a)({},De),{},{children:Object(J.jsx)(rt,{albumId:n.id,setPlayingAlbum:s})}))})]}):null},lt=Z.c.div(y||(y=Object(Y.a)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n"]))),ut=Z.c.div(k||(k=Object(Y.a)(["\n  z-index: 2;\n  position: relative;\n  display: flex;\n  flex-wrap: nowrap;\n  flex: 1;\n  padding-top: 8%;\n  -webkit-overflow-scrolling: touch; /* [3] */\n  -ms-overflow-style: -ms-autohiding-scrollbar;\n  perspective: 500px;\n"]))),dt=Object(Z.c)(Ke.a.div)(S||(S=Object(Y.a)(["\n  z-index: 0;\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 30%;\n"]))),pt=Object(Z.c)(Ke.a.div)(C||(C=Object(Y.a)(["\n  z-index: 1;\n  position: absolute;\n  top: 20px;\n  bottom: 0;\n  left: 0;\n  right: 0;\n"]))),bt=Z.c.h3(M||(M=Object(Y.a)(["\n  margin: 0;\n  font-size: 16px;\n  text-align: center;\n\n  :first-of-type {\n    margin-top: 24px;\n  }\n"]))),ht=function(e){var t,n=e.albums,i=Object(K.useState)(0),r=Object(Q.a)(i,2),a=r[0],o=r[1],c=Object(K.useState)({x:0,y:0}),s=Object(Q.a)(c,2),l=s[0],u=s[1],d=Object(K.useRef)(null),p=Object(K.useState)(),b=Object(Q.a)(p,2),h=b[0],f=b[1],j=Object(K.useState)(!1),v=Object(Q.a)(j,2),x=v[0],O=v[1],g=ci().hideWindow,m=Object(K.useCallback)((function(){if(!h){var e=n[a];f(e)}}),[a,n,h]),w=Object(K.useCallback)((function(){h&&x?O(!1):h?f(void 0):g()}),[g,x,h]),y=Object(K.useCallback)((function(){a<n.length-1&&!h&&!x&&o(a+1)}),[a,n.length,x,h]),k=Object(K.useCallback)((function(){a>0&&!h&&!x&&o(a-1)}),[a,x,h]),S=Object(K.useCallback)((function(){if(d.current){var e=d.current.getBoundingClientRect(),t=e.width,n=e.height;u({x:t/2,y:n/2})}}),[]);return Object(K.useEffect)(S,[S]),Ie("centerclick",m),Ie("menuclick",w),Ie("forwardscroll",y),Ie("backwardscroll",k),Object(J.jsxs)(lt,{children:[Object(J.jsx)(ut,{ref:d,children:n.map((function(e,t){return Object(J.jsx)(st,{index:t,activeIndex:a,midpoint:l,album:e,playingAlbum:x,isSelected:!!h&&e.id===h.id,setPlayingAlbum:O},"cf-artwork-".concat(e.id))}))}),Object(J.jsxs)(ae.a,{children:[n.length&&!x&&Object(J.jsx)(dt,Object(ue.a)(Object(ue.a)({},Ve),{},{children:Object(J.jsx)(bt,{children:null===(t=n[a])||void 0===t?void 0:t.name})})),x&&Object(J.jsx)(pt,Object(ue.a)(Object(ue.a)({},Ve),{},{children:Object(J.jsx)(zr,{hideArtwork:!0,onHide:w})}))]})]})},ft=Z.c.div(P||(P=Object(Y.a)(["\n  flex: 1;\n"]))),jt=function(){var e=ci().hideWindow,t=Ci().isAuthorized,n=Pi({name:"albums",artworkSize:350}),i=n.data,r=n.isLoading,a=Object(K.useCallback)((function(){t&&!r||e()}),[e,t,r]);return Ie("menuclick",a),Object(J.jsx)(ft,{children:r?Object(J.jsx)(Sr,{backgroundColor:"white"}):t?Object(J.jsx)(ht,{albums:null!==i&&void 0!==i?i:[]}):Object(J.jsx)(Yi,{message:"Sign in to view Cover Flow"})})},vt=Object(Z.c)(Ke.a.div)(T||(T=Object(Y.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  color: white;\n  background: linear-gradient(180deg, #b1b5c0 0%, #686e7a 100%);\n"]))),xt=Z.c.img(A||(A=Object(Y.a)(["\n  height: 6em;\n  width: 6em;\n  margin: ",";\n"])),ee.XS),Ot=Z.c.h3(E||(E=Object(Y.a)(["\n  margin: 0;\n  font-size: 16px;\n  font-weight: 500;\n"]))),gt=function(){return Object(J.jsxs)(vt,{children:[Object(J.jsx)(xt,{src:"dice.svg"}),Object(J.jsx)(Ot,{children:"Games"})]})},mt=Object(Z.c)(Ke.a.div)(I||(I=Object(Y.a)(["\n  z-index: 1;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n"]))),wt=function(){var e=Ci(),t=e.isSpotifyAuthorized,n=e.isAppleAuthorized,i=Pi({name:"albums",artworkSize:400}),r=i.data,a=i.isLoading,o=i.hasError,c=Object(K.useMemo)((function(){return r&&!o?r.map((function(e){var t,n;return null!==(t=null===(n=e.artwork)||void 0===n?void 0:n.url)&&void 0!==t?t:""})):[]}),[r,o]);return Object(J.jsx)(mt,Object(ue.a)(Object(ue.a)({},Ge),{},{children:a?Object(J.jsx)(Sr,{backgroundColor:"linear-gradient(180deg, #B1B5C0 0%, #686E7A 100%)"}):t||n?Object(J.jsx)(yr,{urls:c}):Object(J.jsx)(Yi,{message:"Sign in to view your library"})}))},yt=Object(Z.c)(Ke.a.div)(L||(L=Object(Y.a)(["\n  height: 100%;\n"]))),kt=Z.c.img(z||(z=Object(Y.a)(["\n  height: 100%;\n  width: auto;\n"]))),St=function(){var e,t=Se().nowPlayingItem;return t?Object(J.jsx)(yt,{children:Object(J.jsx)(kt,{src:Je(300,null===(e=t.artwork)||void 0===e?void 0:e.url),alt:"now playing artwork"})}):null},Ct=Object(Z.c)(Ke.a.div)(N||(N=Object(Y.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  color: white;\n  background: linear-gradient(180deg, #b1b5c0 0%, #686e7a 100%);\n"]))),Mt=Z.c.img(R||(R=Object(Y.a)(["\n  height: 6em;\n  width: 6em;\n  margin: ",";\n"])),ee.XS),Pt=Z.c.h3(W||(W=Object(Y.a)(["\n  margin: 4px 0 0;\n  font-size: 16px;\n  font-weight: 600;\n"]))),Tt=Object(Z.c)(Pt)(_||(_=Object(Y.a)(["\n  font-size: 14px;\n  font-weight: 400;\n"]))),At={spotify:"Spotify",apple:"Apple Music",none:"None",selected:"Selected service"},Et=function(){var e=Ci().service,t="spotify"===e?"spotify_icon.svg":"apple_music_icon.svg",n=At[null!==e&&void 0!==e?e:"none"];return Object(J.jsxs)(Ct,{children:[Object(J.jsx)(Mt,{src:t}),Object(J.jsx)(Pt,{children:n}),Object(J.jsx)(Tt,{children:At.selected})]})},It=Object(Z.c)(Ke.a.div)(U||(U=Object(Y.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  color: white;\n  background: linear-gradient(180deg, #b1b5c0 0%, #686e7a 100%);\n"]))),Lt=Z.c.img(H||(H=Object(Y.a)(["\n  height: 4em;\n  width: 4em;\n  margin: ",";\n"])),ee.XS),zt=Z.c.h3(X||(X=Object(Y.a)(["\n  margin: 0;\n  font-size: 16px;\n  font-weight: 500;\n"]))),Nt=Z.c.h3(F||(F=Object(Y.a)(["\n  margin: 0;\n  font-size: 14px;\n  font-weight: 500;\n"]))),Rt=function(){return Object(J.jsxs)(It,{children:[Object(J.jsx)(Lt,{src:"react_logo.svg"}),Object(J.jsx)(zt,{children:"iPod.js"}),Object(J.jsx)(Nt,{children:"by Tanner V"})]})};!function(e){e.MUSIC="music",e.GAMES="games",e.SETTINGS="settings",e.NOW_PLAYING="nowPlaying",e.SERVICE="service"}(V||(V={}));var Wt=(B={},Object(Qe.a)(B,V.MUSIC,(function(){return Object(J.jsx)(wt,{})})),Object(Qe.a)(B,V.GAMES,(function(){return Object(J.jsx)(gt,{})})),Object(Qe.a)(B,V.SETTINGS,(function(){return Object(J.jsx)(Rt,{})})),Object(Qe.a)(B,V.NOW_PLAYING,(function(){return Object(J.jsx)(St,{})})),Object(Qe.a)(B,V.SERVICE,(function(){return Object(J.jsx)(Et,{})})),B),_t="Now Playing",Ut=function(){var e=Ci().isAuthorized,t=Te().signIn,n=Se().nowPlayingItem,i=Oi().signIn,r=ci(),a=r.showWindow,o=r.windowStack,c=Object(K.useMemo)((function(){return[{type:"View",label:"Cover Flow",viewId:ni.coverFlow.id,component:function(){return Object(J.jsx)(jt,{})},preview:V.MUSIC},{type:"View",label:"Music",viewId:ni.music.id,component:function(){return Object(J.jsx)(Ht,{})},preview:V.MUSIC},{type:"View",label:"Games",viewId:ni.games.id,component:function(){return Object(J.jsx)(Kt,{})},preview:V.GAMES},{type:"View",label:"Settings",viewId:ni.settings.id,component:function(){return Object(J.jsx)(cn,{})},preview:V.SETTINGS}].concat(Object(oe.a)(Ui(!e,{type:"ActionSheet",id:ni.signinPopup.id,label:"Sign in",listOptions:[{type:"Action",label:"Apple Music",onSelect:t},{type:"Action",label:"Spotify",onSelect:i}],preview:V.MUSIC})),Object(oe.a)(Ui(!!n,{type:"View",label:_t,viewId:ni.nowPlaying.id,component:function(){return Object(J.jsx)(Dt,{})},preview:V.NOW_PLAYING})))}),[e,n,t,i]),s=ri(ni.home.id,c),l=Object(Q.a)(s,1)[0],u=Object(K.useCallback)((function(){var e=o[o.length-1];!!n&&e.id!==ni.nowPlaying.id&&e.id!==ni.coverFlow.id&&a({id:ni.nowPlaying.id,type:tn.FULL,component:Dt})}),[n,a,o]);return Ie("idle",u),Object(J.jsx)(Xi,{options:c,activeIndex:l})},Ht=function(){var e,t,n=Te().music;Le(ni.music.id);var i=Object(K.useMemo)((function(){var e,t,i=[{type:"View",label:"Cover Flow",viewId:ni.coverFlow.id,component:function(){return Object(J.jsx)(jt,{})},preview:V.MUSIC},{type:"View",label:"Playlists",viewId:ni.playlists.id,component:function(){return Object(J.jsx)(Gt,{})},preview:V.MUSIC},{type:"View",label:"Artists",viewId:ni.artists.id,component:function(){return Object(J.jsx)(Xt,{})},preview:V.MUSIC},{type:"View",label:"Albums",viewId:ni.albums.id,component:function(){return Object(J.jsx)(Bt,{})},preview:V.MUSIC}];return n.isAuthorized&&(null===(e=n.player)||void 0===e||null===(t=e.nowPlayingItem)||void 0===t?void 0:t.isPlayable)&&i.push({type:"View",label:"Now playing",viewId:ni.nowPlaying.id,component:function(){return Object(J.jsx)(Dt,{})},preview:V.NOW_PLAYING}),i}),[n.isAuthorized,null===(e=n.player)||void 0===e||null===(t=e.nowPlayingItem)||void 0===t?void 0:t.isPlayable]),r=ri(ni.music.id,i),a=Object(Q.a)(r,1)[0];return Object(J.jsx)(Xi,{options:i,activeIndex:a})},Xt=function(){Le(ii.artists.id);var e=Ci().isAuthorized,t=Pi({name:"artists"}),n=t.data,i=t.isLoading,r=Object(K.useMemo)((function(){var e;return null!==(e=null===n||void 0===n?void 0:n.map((function(e){return{type:"View",label:e.name,viewId:ii.artist.id,component:function(){return Object(J.jsx)(Ft,{id:e.id,inLibrary:!0})}}})))&&void 0!==e?e:[]}),[n]),a=ri(ii.artists.id,r),o=Object(Q.a)(a,1)[0];return e?Object(J.jsx)(Xi,{loading:i,options:r,activeIndex:o,emptyMessage:"No saved artists"}):Object(J.jsx)(Yi,{message:"Sign in to view your artists"})},Ft=function(e){var t=e.id,n=e.inLibrary,i=void 0!==n&&n;Le(ni.artist.id);var r=Pi({name:"artist",id:t,inLibrary:i}),a=r.data,o=r.isLoading,c=Object(K.useMemo)((function(){var e;return null!==(e=null===a||void 0===a?void 0:a.map((function(e){var t;return{type:"View",label:e.name,sublabel:e.artistName,imageUrl:Je(100,null===(t=e.artwork)||void 0===t?void 0:t.url),viewId:ni.album.id,component:function(){var t;return Object(J.jsx)(Vt,{id:null!==(t=e.id)&&void 0!==t?t:"",inLibrary:i})},longPressOptions:Ze("album",e.id)}})))&&void 0!==e?e:[]}),[a,i]),s=ri(ni.artist.id,c),l=Object(Q.a)(s,1)[0];return Object(J.jsx)(Xi,{loading:o,options:c,activeIndex:l,emptyMessage:"No albums by this artist"})},Bt=function(){var e=Ci().isAuthorized;Le(ii.albums.id);var t=Pi({name:"albums"}),n=t.data,i=t.isLoading,r=Object(K.useMemo)((function(){var e;return null!==(e=null===n||void 0===n?void 0:n.map((function(e){var t;return{type:"View",label:e.name,sublabel:e.artistName,imageUrl:Je(50,null===(t=e.artwork)||void 0===t?void 0:t.url),viewId:ii.album.id,component:function(){var t;return Object(J.jsx)(Vt,{id:null!==(t=e.id)&&void 0!==t?t:"",inLibrary:!0})}}})))&&void 0!==e?e:[]}),[n]),a=ri(ii.albums.id,r),o=Object(Q.a)(a,1)[0];return e?Object(J.jsx)(Xi,{loading:i,options:r,activeIndex:o,emptyMessage:"No albums"}):Object(J.jsx)(Yi,{})},Vt=function(e){var t=e.id,n=e.inLibrary,i=void 0!==n&&n;Le(ni.album.id);var r=Pi({name:"album",id:t,inLibrary:i}),a=r.data,o=r.isLoading,c=Object(K.useMemo)((function(){var e;return null!==(e=null===a||void 0===a?void 0:a.songs.map((function(e,t){return{type:"Song",label:e.name,queueOptions:{album:a,startPosition:t},showNowPlayingView:!0,longPressOptions:Ze("song",e.id)}})))&&void 0!==e?e:[]}),[a]),s=ri(ni.album.id,c),l=Object(Q.a)(s,1)[0];return Object(J.jsx)(Xi,{loading:o,options:c,activeIndex:l,emptyMessage:"No saved songs"})},Dt=function(){Le(ii.nowPlaying.id);var e=ci().hideWindow;return Object(J.jsx)(zr,{onHide:e})},Gt=function(){Le(ii.playlists.id);var e=Ci().isAuthorized,t=Pi({name:"playlists"}),n=t.data,i=t.isLoading,r=Object(K.useMemo)((function(){var e;return null!==(e=null===n||void 0===n?void 0:n.map((function(e){var t;return{type:"View",label:e.name,sublabel:e.description||"By ".concat(e.curatorName),imageUrl:null===(t=e.artwork)||void 0===t?void 0:t.url,viewId:ii.playlist.id,component:function(){return Object(J.jsx)(Yt,{id:e.id,inLibrary:!0})},longPressOptions:Ze("playlist",e.id)}})))&&void 0!==e?e:[]}),[n]),a=ri(ii.playlists.id,r),o=Object(Q.a)(a,1)[0];return e?Object(J.jsx)(Xi,{loading:i,options:r,activeIndex:o,emptyMessage:"No saved playlists"}):Object(J.jsx)(Yi,{message:"Sign in to view your playlists"})},Yt=function(e){var t=e.id,n=e.inLibrary,i=void 0!==n&&n;Le(ni.playlist.id);var r=Pi({name:"playlist",id:t,inLibrary:i}),a=r.data,o=r.isLoading,c=Object(K.useMemo)((function(){var e;return null!==(e=null===a||void 0===a?void 0:a.songs.map((function(e,t){var n,i;return{type:"Song",label:e.name,sublabel:null!==(n=e.artistName)&&void 0!==n?n:"Unknown artist",imageUrl:null===(i=e.artwork)||void 0===i?void 0:i.url,queueOptions:{playlist:a,startPosition:t},showNowPlayingView:!0,longPressOptions:Ze("song",e.id)}})))&&void 0!==e?e:[]}),[a]),s=ri(ni.playlist.id,c),l=Object(Q.a)(s,1)[0];return Object(J.jsx)(Xi,{loading:o,options:c,activeIndex:l,emptyMessage:"No songs in this playlist"})},Kt=function(){Le(ni.games.id);var e=[{type:"View",label:"Brick",viewId:ni.brickGame.id,component:function(){return Object(J.jsx)(on,{})},preview:V.GAMES}],t=ri(ni.games.id,e),n=Object(Q.a)(t,1)[0];return Object(J.jsx)(Xi,{options:e,activeIndex:n})},Qt={init:function(){var e=this;this.canvas=document.querySelector("#brickBreakerCanvas"),this.context=this.canvas?this.canvas.getContext("2d"):null,this.context?(window.addEventListener("centerclick",this.handleCenterClick),this.inStasis=!1,this.initialized||(window.addEventListener("forwardscroll",(function(){return Jt.moveRight()}),!0),window.addEventListener("backwardscroll",(function(){return Jt.moveLeft()}),!0),window.addEventListener("menuclick",(function(){return e.inStasis=!0})),this.waiting=!0,this.setupBricks(),Jt.draw(),this.drawBricks(),qt.update(),this.update(),this.initialized=!0)):console.log("Error getting application context")},handleCenterClick:function(){Qt.waiting&&!Qt.inStasis&&(Qt.waiting=!1)},enterStasis:function(){},update:function(){Qt.clearContext(),Jt.draw(),Qt.drawBricks(),qt.update(),requestAnimationFrame(Qt.update)},clearContext:function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},die:function(){Jt.position.x=200,Jt.lives-=1,Jt.lives<1&&this.reset(),qt.reset(),Qt.waiting=!0},drawBricks:function(){this.bricks.forEach((function(e){e.draw()}))},setupBricks:function(){this.bricks=[];var e=0;for(e=0;e<10;e++){var t=new Zt;t.position.x=100+e*t.size.width+e,t.position.y=50,t.health=1,this.bricks.push(t)}for(e=0;e<8;e++){var n=new Zt;n.position.x=150+e*n.size.width+e,n.position.y=50+n.size.height+1,n.health=2,this.bricks.push(n)}for(e=0;e<6;e++){var i=new Zt;i.position.x=200+e*i.size.width+e,i.position.y=50+2*i.size.height+1,i.health=3,this.bricks.push(i)}},reset:function(){Jt.reset(),qt.reset(),this.setupBricks()},bricks:[],canvas:null,context:null,timeout:33},Jt={position:{x:200,y:480},score:0,lives:3,physics:{speed:10},size:{height:20,width:150},draw:function(){Qt.context.fillStyle="black",Qt.context.fillRect(this.position.x,this.position.y,this.size.width,this.size.height)},moveLeft:function(){this.position.x>0&&(this.position.x-=1.5*this.physics.speed)},moveRight:function(){this.position.x<Qt.canvas.width-this.size.width&&(this.position.x+=1.5*this.physics.speed)},reset:function(){this.lives=3,this.score=0,this.resetPosition()},resetPosition:function(){this.position.x=200}},qt={position:{x:0,y:250},size:{height:10,width:10},physics:{speed:5},direction:{x:1,y:1},draw:function(){Qt.context.fillStyle="transparent";var e=Qt.context,t=this.position.x,n=this.position.y;e.beginPath(),e.arc(t,n,10,0,2*Math.PI,!1),e.fillStyle="black",e.fill(),e.lineWidth=5,e.strokeStyle="black",e.stroke()},reset:function(){this.position.x=0,this.position.y=250,this.direction.x=1,this.direction.y=1},update:function(){this.position.x<=0&&(this.direction.x=1),this.position.x>=Qt.canvas.width&&(this.direction.x=-1),this.position.y<=0&&(this.direction.y=1),this.position.y>=Qt.canvas.height&&Qt.die(),Qt.waiting||Qt.inStasis||(this.checkCollisionWithPlayer(),this.checkCollisionWithBricks(),this.position.x+=this.physics.speed*this.direction.x,this.position.y+=this.physics.speed*this.direction.y),this.draw()},checkCollisionWithPlayer:function(){this.position.y+this.size.height<Jt.position.y||this.position.y>Jt.position.y+Jt.size.height||this.position.x>Jt.position.x+Jt.size.width||this.position.x+this.size.width<Jt.position.x||(this.direction.y=-1)},checkCollisionWithBricks:function(){var e=0;for(e=0;e<Qt.bricks.length;e++){var t=Qt.bricks[e];this.position.y+this.size.height<t.position.y||(this.position.y>t.position.y+t.size.height||this.position.x>t.position.x+t.size.width||this.position.x+this.size.width<t.position.x||(t.health-=1,Jt.score+=20,t.health<1&&Qt.bricks.splice(e,1),1===this.direction.x&&1===this.direction.y?this.position.y>t.position.y?this.direction.x=-1:this.direction.y=-1:-1===this.direction.x&&1===this.direction.y?this.position.y>t.position.y?this.direction.x=1:this.direction.y=-1:1===this.direction.x&&-1===this.direction.y?this.position.y>t.position.y?this.direction.x=-1:this.direction.y=-1:-1===this.direction.x&&-1===this.direction.y&&(this.position.y>t.position.y?this.direction.x=1:this.direction.y=-1)))}}},Zt=function(){this.health=3,this.size={height:20,width:60},this.position={x:0,y:0}};Zt.prototype.draw=function(){switch(this.health){case 3:Qt.context.fillStyle="rgb(0, 240, 0)";break;case 2:Qt.context.fillStyle="rgb(255,140,0";break;case 1:Qt.context.fillStyle="rgb(200, 0, 0)"}this.health>0&&Qt.context.fillRect(this.position.x,this.position.y,this.size.width-5,this.size.height-5)};var $t,en,tn,nn=Qt,rn=Z.c.div($t||($t=Object(Y.a)(["\n  height: 100%;\n  background: rgb(2, 0, 36);\n  background: linear-gradient(\n    90deg,\n    rgba(2, 0, 36, 1) 0%,\n    rgba(107, 173, 255, 1) 0%,\n    rgba(0, 212, 255, 1) 100%\n  );\n"]))),an=Z.c.canvas(en||(en=Object(Y.a)(["\n  height: 100%;\n  width: 100%;\n"]))),on=function(){return Le(ii.brickGame.id),Object(K.useEffect)((function(){nn.init()}),[]),Object(J.jsx)(rn,{children:Object(J.jsx)(an,{width:"800",height:"500",id:"brickBreakerCanvas",children:Object(J.jsx)("p",{children:"Your browser does not support this feature"})})})},cn=function(){Le(ii.settings.id);var e=Ci(),t=e.isAuthorized,n=e.isAppleAuthorized,i=e.isSpotifyAuthorized,r=e.service,a=Te(),o=a.signIn,c=a.signOut,s=Oi(),l=s.signOut,u=s.signIn,d=Object(K.useMemo)((function(){return[{type:"View",label:"About",viewId:ii.about.id,component:function(){return Object(J.jsx)(He,{})},preview:V.SETTINGS}].concat(Object(oe.a)(Ui(t,{type:"ActionSheet",id:ii.serviceTypeActionSheet.id,label:"Choose service",listOptions:[{type:"Action",label:"Apple Music ".concat("apple"===r?"(Current)":""),onSelect:function(){o()}},{type:"Action",label:"Spotify ".concat("spotify"===r?"(Current)":""),onSelect:u}],preview:V.SERVICE})),Object(oe.a)(Ui(!t,{type:"ActionSheet",id:ii.signinPopup.id,label:"Sign in",listOptions:[{type:"Action",label:"Apple Music",onSelect:function(){o()}},{type:"Action",label:"Spotify",onSelect:u}],preview:V.MUSIC})),Object(oe.a)(Ui(t,{type:"ActionSheet",id:ii.signOutPopup.id,label:"Sign out",listOptions:[].concat(Object(oe.a)(Ui(n,{type:"Action",label:"Apple Music",onSelect:c})),Object(oe.a)(Ui(i,{type:"Action",label:"Spotify",onSelect:l}))),preview:V.SERVICE})))}),[n,t,i,r,o,u,c,l]),p=ri(ii.settings.id,d),b=Object(Q.a)(p,1)[0];return Object(J.jsx)(Xi,{options:d,activeIndex:b})};!function(e){e.SPLIT="SPLIT",e.FULL="FULL",e.COVER_FLOW="COVER_FLOW",e.ACTION_SHEET="ACTION_SHEET",e.POPUP="POPUP"}(tn||(tn={}));var sn,ln,un,dn,pn,bn,hn,fn,jn,vn,xn,On,gn,mn,wn,yn,kn,Sn,Cn,Mn,Pn,Tn,An,En,In,Ln,zn,Nn,Rn,Wn,_n,Un,Hn,Xn,Fn,Bn,Vn,Dn,Gn,Yn,Kn,Qn,Jn,qn,Zn,$n,ei,ti,ni={home:{id:"home",title:"iPod.js",type:tn.SPLIT},music:{id:"music",title:"Music",type:tn.SPLIT},games:{id:"games",title:"Games",type:tn.SPLIT},settings:{id:"settings",title:"Settings",type:tn.SPLIT},about:{id:"about",title:"About",type:tn.FULL},artists:{id:"artists",title:"Artists",type:tn.FULL},artist:{id:"artist",title:"Artist",type:tn.FULL},albums:{id:"albums",title:"Albums",type:tn.FULL},album:{id:"album",title:"Album",type:tn.FULL},nowPlaying:{id:"nowPlaying",title:"Now Playing",type:tn.FULL},playlists:{id:"playlists",title:"Playlists",type:tn.FULL},playlist:{id:"playlist",title:"Playlist",type:tn.FULL},brickGame:{id:"brickGame",title:"Brick",type:tn.FULL},coverFlow:{id:"coverFlow",title:"Cover Flow",type:tn.COVER_FLOW},mediaActionSheet:{id:"mediaActionSheet",title:"Media Options",type:tn.ACTION_SHEET},serviceTypeActionSheet:{id:"serviceTypeActionSheet",title:"Service",type:tn.ACTION_SHEET},signinPopup:{id:"signinPopup",title:"Sign in",type:tn.ACTION_SHEET},signOutPopup:{id:"signOutPopup",title:"Sign out",type:tn.ACTION_SHEET},spotifyNotSupportedPopup:{id:"spotifyNotSupportedPopup",title:"Unsupported browser",type:tn.POPUP}},ii=ni,ri=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=ci(),i=n.showWindow,r=n.windowStack,a=n.setPreview,o=Se(),c=o.play,s=Object(K.useState)(0),l=Object(Q.a)(s,2),u=l[0],d=l[1],p=Object(K.useRef)(),b=r[r.length-1].id===e,h=Object(K.useCallback)((function(e){if(p.current&&clearTimeout(p.current),b&&t[e])return p.current=setTimeout((function(){var n=t[e].preview;n&&a(n)}),750),function(){p.current&&clearTimeout(p.current)}}),[b,t,a]),f=Object(K.useCallback)((function(){u<t.length-1&&b&&(d(u+1),h(u+1))}),[h,u,b,t.length]),j=Object(K.useCallback)((function(){u>0&&b&&(d(u-1),h(u-1))}),[h,u,b]),v=Object(K.useCallback)((function(e,t,n){var r,a;i({id:e,type:null!==(r=null!==n&&void 0!==n?n:null===(a=ii[e])||void 0===a?void 0:a.type)&&void 0!==r?r:tn.FULL,component:t})}),[i]),x=Object(K.useCallback)((function(e){i({type:tn.POPUP,id:e.popupId,title:e.title,description:e.description,listOptions:e.listOptions})}),[i]),O=Object(K.useCallback)((function(e){i({type:tn.ACTION_SHEET,id:e.id,listOptions:e.listOptions})}),[i]),g=Object(K.useCallback)(Object(le.a)(se.a.mark((function e(){var n;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t[u],b&&n){e.next=3;break}return e.abrupt("return");case 3:p.current&&clearTimeout(p.current),e.t0=n.type,e.next="Song"===e.t0?7:"Link"===e.t0?11:"View"===e.t0?13:"Action"===e.t0?15:"Popup"===e.t0?17:"ActionSheet"===e.t0?19:21;break;case 7:return e.next=9,c(n.queueOptions);case 9:return n.showNowPlayingView&&v(ii.nowPlaying.id,(function(){return Object(J.jsx)(Dt,{})})),e.abrupt("break",21);case 11:return window.open(n.url,"_blank"),e.abrupt("break",21);case 13:return v(n.viewId,n.component,n.windowType),e.abrupt("break",21);case 15:return n.onSelect(),e.abrupt("break",21);case 17:return x(n),e.abrupt("break",21);case 19:return O(n),e.abrupt("break",21);case 21:case"end":return e.stop()}}),e)}))),[O,x,v,u,b,t,c]),m=Object(K.useCallback)(Object(le.a)(se.a.mark((function e(){var n;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t[u],b&&n){e.next=3;break}return e.abrupt("return");case 3:n.longPressOptions&&i({type:tn.ACTION_SHEET,id:ii.mediaActionSheet.id,listOptions:n.longPressOptions});case 4:case"end":return e.stop()}}),e)}))),[u,b,t,i]);return Object(K.useEffect)((function(){t.length&&u>t.length-1&&d(0)}),[u,t.length]),Ti((function(){if(t&&t[0]){var e=t[0].preview;e&&a(e)}})),Ie("centerclick",(function(){g()})),Ie("centerlongclick",m),Ie("forwardscroll",f),Ie("backwardscroll",j),[u]},ai=Object(K.createContext)([{windowStack:[],headerTitle:"iPod.js",preview:V.MUSIC},function(){}]),oi=function(e){var t=e.children,n=[{id:ii.home.id,type:tn.SPLIT,component:Ut}],i=Object(K.useState)({windowStack:n,headerTitle:ii.home.title,preview:V.MUSIC}),r=Object(Q.a)(i,2),a=r[0],o=r[1];return Object(J.jsx)(ai.Provider,{value:[a,o],children:t})},ci=function(){var e=Object(K.useContext)(ai),t=Object(Q.a)(e,2),n=t[0],i=t[1],r=Object(K.useCallback)((function(e){i((function(t){return Object(ue.a)(Object(ue.a)({},t),{},{windowStack:[].concat(Object(oe.a)(t.windowStack),[e]),headerTitle:ii[e.id].title})}))}),[i]),a=Object(K.useCallback)((function(e){1!==n.windowStack.length&&i((function(t){var n=e?t.windowStack.filter((function(t){return t.id!==e})):t.windowStack.slice(0,-1);return Object(ue.a)(Object(ue.a)({},t),{},{windowStack:n,headerTitle:ii[n[n.length-1].id].title})}))}),[i,n.windowStack.length]),o=Object(K.useCallback)((function(){i((function(e){return Object(ue.a)(Object(ue.a)({},e),{},{windowStack:e.windowStack.slice(0,1)})}))}),[i]),c=Object(K.useCallback)((function(e){var t=n.windowStack;return t[t.length-1].id===e}),[n]),s=Object(K.useCallback)((function(e){i((function(t){return Object(ue.a)(Object(ue.a)({},t),{},{headerTitle:e})}))}),[i]),l=Object(K.useCallback)((function(e){i((function(t){return Object(ue.a)(Object(ue.a)({},t),{},{preview:e})}))}),[i]);return{showWindow:r,hideWindow:a,resetWindows:o,isWindowActive:c,windowStack:n.windowStack,headerTitle:n.headerTitle,preview:n.preview,setHeaderTitle:s,setPreview:l}},si="spotify_access_token",li="spotify_refresh_token",ui="spotify_token_timestamp",di=function(){var e=Object(le.a)(se.a.mark((function e(){var t,n,i;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=pi(),n=t.storedAccessToken,i=t.storedRefreshToken,n&&i){e.next=3;break}return e.abrupt("return",hi());case 3:if(!fi()){e.next=5;break}return e.abrupt("return",bi(i));case 5:return e.abrupt("return",{accessToken:n,refreshToken:i});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),pi=function(){var e,t;return{storedAccessToken:null!==(e=localStorage.getItem(si))&&void 0!==e?e:void 0,storedRefreshToken:null!==(t=localStorage.getItem(li))&&void 0!==t?t:void 0}},bi=function(){var e=Object(le.a)(se.a.mark((function e(t){var n,i,r;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(vi,"/refresh_token?refresh_token=").concat(t),{credentials:"same-origin",mode:"cors"});case 3:return n=e.sent,e.next=6,n.json();case 6:return i=e.sent,r=i.access_token,console.log("Got refreshed tokens:",{accessToken:r,storedRefreshToken:t}),ji(r,t),e.abrupt("return",{accessToken:r,refreshToken:t});case 13:e.prev=13,e.t0=e.catch(0),console.error("Error fetchinng refresh token:",{error:e.t0});case 16:return e.abrupt("return",{accessToken:void 0,refreshToken:void 0});case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),hi=function(){var e=Object(le.a)(se.a.mark((function e(){var t,n,i,r,a,o,c,s,l,u;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=new URL(window.document.URL),r=i.searchParams,a=null!==(t=r.get("code"))&&void 0!==t?t:void 0,o=null!==(n=r.get("state"))&&void 0!==n?n:void 0,a&&o){e.next=6;break}return e.abrupt("return",{});case 6:return e.prev=6,e.next=9,fetch("".concat(vi,"/callback?state=").concat(o,"&code=").concat(a),{credentials:"same-origin",mode:"cors"});case 9:return c=e.sent,e.next=12,c.json();case 12:return s=e.sent,l=s.accessToken,u=s.refreshToken,ji(l,u),r.delete("code"),r.delete("state"),window.history.replaceState({},"",i.toString()),e.abrupt("return",{accessToken:l,refreshToken:u,isNew:!0});case 22:e.prev=22,e.t0=e.catch(6),console.error("error fetching token:",{error:e.t0});case 25:return e.abrupt("return",{accessToken:void 0,refreshToken:void 0});case 26:case"end":return e.stop()}}),e,null,[[6,22]])})));return function(){return e.apply(this,arguments)}}(),fi=function(){var e,t=parseInt(null!==(e=localStorage.getItem(ui))&&void 0!==e?e:""),n=Date.now();if(!t)return!0;var i=Math.round((n-t)/1e3/60);return console.log("Last token refresh: ".concat(i," minutes ago")),i>30},ji=function(e,t){e&&t?(localStorage.setItem(si,e),localStorage.setItem(li,t),localStorage.setItem(ui,"".concat(Date.now()))):console.error("Error: Attempting to save undefined tokens:",{accessToken:e,refreshToken:t})},vi="https://b7d1fdb16506.ngrok.io",xi=Object(K.createContext)({}),Oi=function(){var e=Ci(),t=e.isSpotifyAuthorized,n=e.setIsSpotifyAuthorized,i=e.isAppleAuthorized,r=e.setService,a=ci().showWindow,o=Object(K.useContext)(xi),c=Object(K.useCallback)((function(){o.isMounted?t?r("spotify"):window.open("".concat(vi,"/").concat(window.location.origin.includes("localhost:3000")?"login_dev":"login"),"_self"):a({type:tn.POPUP,id:ii.spotifyNotSupportedPopup.id,title:ii.spotifyNotSupportedPopup.title,description:"Spotify sadly only supports web playback on Chrome (desktop)",listOptions:[{type:"Action",label:"Okay \ud83d\ude1e",onSelect:function(){}}]})}),[t,r,a,o.isMounted]),s=Object(K.useCallback)((function(){o.spotifyPlayer.disconnect(),n(!1),localStorage.removeItem(si),localStorage.removeItem(li),localStorage.removeItem(ui),r(i?"apple":void 0)}),[i,n,r,o.spotifyPlayer]);return Object(ue.a)(Object(ue.a)({},o),{},{signIn:c,signOut:s})},gi=function(e){var t,n=e.children,i=Ci(),r=i.setIsSpotifyAuthorized,a=i.setService,o=Object(K.useState)(),c=Object(Q.a)(o,2),s=c[0],l=c[1],u=Object(K.useState)(),d=Object(Q.a)(u,2),p=d[0],b=d[1],h=Object(K.useRef)(),f=Object(K.useState)(!1),j=Object(Q.a)(f,2),v=j[0],x=j[1],O=Object(K.useCallback)(Object(le.a)(se.a.mark((function e(){var t,n,i,o,c;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,di();case 2:t=e.sent,n=t.accessToken,i=t.refreshToken,o=t.isNew,x(!0),n&&i&&(l(n),(c=new window.Spotify.Player({name:"iPod Classic",getOAuthToken:function(){var e=Object(le.a)(se.a.mark((function e(t){var n,i;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=pi(),i=n.storedAccessToken){e.next=4;break}return console.error("ERROR: Didn't find stored access token"),e.abrupt("return");case 4:t(i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})).addListener("ready",(function(e){var t=e.device_id;console.log({device_id:t}),b(t),r(!0)})),c.addListener("authentication_error",(function(e){var t=e.message;console.error("Spotify authentication error: ".concat(t)),r(!1)})),c.addListener("playback_error",(function(e){var t=e.message;console.error(t)})),c.connect(),h.current=c,o&&a("spotify"));case 8:case"end":return e.stop()}}),e)}))),[r,a]);return Ti((function(){window.onSpotifyWebPlaybackSDKReady=O})),Object(J.jsx)(xi.Provider,{value:{spotifyPlayer:null!==(t=h.current)&&void 0!==t?t:{},accessToken:s,deviceId:p,isMounted:v},children:n})},mi=function(){var e=Object(le.a)(se.a.mark((function e(t){var n,i,r,a;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.endpoint,i=t.accessToken,r=t.onError,e.prev=1,i){e.next=4;break}throw new Error("Provide a Spotify API Access token");case 4:return e.next=6,fetch("https://api.spotify.com/v1/".concat(n),{headers:{Authorization:"Bearer ".concat(i)}});case 6:return a=e.sent,e.next=9,a.json();case 9:return e.abrupt("return",e.sent);case 12:e.prev=12,e.t0=e.catch(1),r(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),wi=function(){var e=Oi().accessToken;return{fetchAlbums:Object(K.useCallback)(Object(le.a)(se.a.mark((function t(){var n;return se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,mi({endpoint:"me/albums?limit=50",accessToken:e,onError:function(e){throw new Error(e)}});case 2:if(!(n=t.sent)){t.next=5;break}return t.abrupt("return",n.items.map((function(e){return xe(e.album)})));case 5:case"end":return t.stop()}}),t)}))),[e]),fetchAlbum:Object(K.useCallback)(Object(le.a)(se.a.mark((function t(){var n,i,r=arguments;return se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.length>0&&void 0!==r[0]?r[0]:"",n=r.length>1?r[1]:void 0,t.next=4,mi({endpoint:"albums/".concat(n),accessToken:e,onError:function(e){throw new Error(e)}});case 4:if(!(i=t.sent)){t.next=7;break}return t.abrupt("return",xe(i));case 7:case"end":return t.stop()}}),t)}))),[e]),fetchArtists:Object(K.useCallback)(Object(le.a)(se.a.mark((function t(){var n,i;return se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,mi({endpoint:"me/following?type=artist&limit=50",accessToken:e,onError:function(e){throw new Error(e)}});case 2:return i=t.sent,t.abrupt("return",null===i||void 0===i||null===(n=i.artists)||void 0===n?void 0:n.items.map(ge));case 4:case"end":return t.stop()}}),t)}))),[e]),fetchArtist:Object(K.useCallback)(Object(le.a)(se.a.mark((function t(){var n,i,r=arguments;return se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.length>0&&void 0!==r[0]?r[0]:"",n=r.length>1?r[1]:void 0,t.next=4,mi({endpoint:"artists/".concat(n,"/albums"),accessToken:e,onError:function(e){throw new Error(e)}});case 4:if(!(i=t.sent)){t.next=7;break}return t.abrupt("return",i.items.map(ve));case 7:case"end":return t.stop()}}),t)}))),[e]),fetchPlaylists:Object(K.useCallback)(Object(le.a)(se.a.mark((function t(){var n,i;return se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,mi({endpoint:"me/playlists?limit=50",accessToken:e,onError:function(e){throw new Error(e)}});case 2:return i=t.sent,t.abrupt("return",null===i||void 0===i||null===(n=i.items)||void 0===n?void 0:n.map(he));case 4:case"end":return t.stop()}}),t)}))),[e]),fetchPlaylist:Object(K.useCallback)(Object(le.a)(se.a.mark((function t(){var n,i,r,a=arguments;return se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>0&&void 0!==a[0]?a[0]:"",i=a.length>1?a[1]:void 0,t.next=4,mi({endpoint:"users/".concat(n,"/playlists/").concat(i),accessToken:e,onError:function(e){throw new Error(e)}});case 4:if(!(r=t.sent)){t.next=7;break}return t.abrupt("return",fe(r));case 7:case"end":return t.stop()}}),t)}))),[e])}},yi="ipodSelectedService",ki="ipodVolume",Si=Object(K.createContext)([{},function(){}]),Ci=function(){var e=Object(K.useContext)(Si),t=Object(Q.a)(e,2),n=t[0],i=t[1],r=Object(K.useCallback)((function(e){return i((function(t){return Object(ue.a)(Object(ue.a)({},t),{},{isSpotifyAuthorized:e})}))}),[i]),a=Object(K.useCallback)((function(e){return i((function(t){return Object(ue.a)(Object(ue.a)({},t),{},{isAppleAuthorized:e})}))}),[i]),o=Object(K.useCallback)((function(e){i((function(t){return Object(ue.a)(Object(ue.a)({},t),{},{service:e})})),e?localStorage.setItem(yi,e):localStorage.removeItem(yi)}),[i]);return Object(ue.a)(Object(ue.a)({},n),{},{isAuthorized:n.isAppleAuthorized||n.isSpotifyAuthorized,setIsSpotifyAuthorized:r,setIsAppleAuthorized:a,setService:o})},Mi=Object(K.memo)((function(e){var t,n=e.children,i=Object(K.useState)({isAppleAuthorized:!1,isSpotifyAuthorized:!1,service:null!==(t=localStorage.getItem(yi))&&void 0!==t?t:void 0}),r=Object(Q.a)(i,2),a=r[0],o=r[1];return Object(J.jsx)(Si.Provider,{value:[a,o],children:n})})),Pi=function(e){var t=wi(),n=Ci(),i=n.service,r=n.isAppleAuthorized,a=n.isSpotifyAuthorized,o=Te().music,c=Object(K.useState)(!0),s=Object(Q.a)(c,2),l=s[0],u=s[1],d=Object(K.useState)(!1),p=Object(Q.a)(d,2),b=p[0],h=p[1],f=Object(K.useState)(),j=Object(Q.a)(f,2),v=j[0],x=j[1],O=Object(K.useState)(!1),g=Object(Q.a)(O,2),m=g[0],w=g[1],y=Object(K.useCallback)(function(){var e=Object(le.a)(se.a.mark((function e(n){var r,a;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("apple"!==i){e.next=7;break}return e.next=3,o.api.library.albums(null,{include:"library-albums"});case 3:a=e.sent,r=a.map((function(e){return je(e,n.artworkSize)})),e.next=11;break;case 7:if("spotify"!==i){e.next=11;break}return e.next=10,t.fetchAlbums();case 10:r=e.sent;case 11:x(r),u(!1);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[o.api,i,t]),k=Object(K.useCallback)(function(){var e=Object(le.a)(se.a.mark((function e(n){var r,a;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("apple"!==i){e.next=14;break}if(!n.inLibrary){e.next=7;break}return e.next=4,o.api.library.album(n.id);case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,o.api.album(n.id);case 9:e.t0=e.sent;case 10:a=e.t0,r=je(a),e.next=18;break;case 14:if("spotify"!==i){e.next=18;break}return e.next=17,t.fetchAlbum(n.userId,n.id);case 17:r=e.sent;case 18:x(r),u(!1);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[o.api,i,t]),S=Object(K.useCallback)(Object(le.a)(se.a.mark((function e(){var n,r;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("apple"!==i){e.next=7;break}return e.next=3,o.api.library.artists(null,{include:"catalog",limit:100});case 3:r=e.sent,n=r.map(Oe),e.next=11;break;case 7:if("spotify"!==i){e.next=11;break}return e.next=10,t.fetchArtists();case 10:n=e.sent;case 11:x(n),u(!1);case 13:case"end":return e.stop()}}),e)}))),[o.api,i,t]),C=Object(K.useCallback)(function(){var e=Object(le.a)(se.a.mark((function e(n){var r,a;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("apple"!==i){e.next=14;break}if(!n.inLibrary){e.next=7;break}return e.next=4,o.api.library.artistRelationship(n.id,"albums");case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,o.api.artistRelationship(n.id,"albums");case 9:e.t0=e.sent;case 10:a=e.t0,r=a.map((function(e){return je(e,n.artworkSize)})),e.next=18;break;case 14:if("spotify"!==i){e.next=18;break}return e.next=17,t.fetchArtist(n.userId,n.id);case 17:r=e.sent;case 18:x(r),u(!1);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[o.api,i,t]),M=Object(K.useCallback)(Object(le.a)(se.a.mark((function e(){var n,r;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("apple"!==i){e.next=7;break}return e.next=3,o.api.library.playlists(null,{limit:100});case 3:r=e.sent,n=r.map(be),e.next=11;break;case 7:if("spotify"!==i){e.next=11;break}return e.next=10,t.fetchPlaylists();case 10:n=e.sent;case 11:x(n),u(!1);case 13:case"end":return e.stop()}}),e)}))),[o.api.library,i,t]),P=Object(K.useCallback)(function(){var e=Object(le.a)(se.a.mark((function e(n){var r,a;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("apple"!==i){e.next=14;break}if(!n.inLibrary){e.next=7;break}return e.next=4,o.api.library.playlist(n.id);case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,o.api.playlist(n.id);case 9:e.t0=e.sent;case 10:a=e.t0,r=be(a),e.next=18;break;case 14:if("spotify"!==i){e.next=18;break}return e.next=17,t.fetchPlaylist(n.userId,n.id);case 17:r=e.sent;case 18:x(r),u(!1);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[o.api,i,t]),T=Object(K.useCallback)(Object(le.a)(se.a.mark((function t(){return se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:h(!1),u(!0),t.t0=e.name,t.next="albums"===t.t0?5:"album"===t.t0?8:"artists"===t.t0?11:"artist"===t.t0?14:"playlists"===t.t0?17:"playlist"===t.t0?20:23;break;case 5:return t.next=7,y(e);case 7:return t.abrupt("break",23);case 8:return t.next=10,k(e);case 10:return t.abrupt("break",23);case 11:return t.next=13,S();case 13:return t.abrupt("break",23);case 14:return t.next=16,C(e);case 16:return t.abrupt("break",23);case 17:return t.next=19,M();case 19:return t.abrupt("break",23);case 20:return t.next=22,P(e);case 22:return t.abrupt("break",23);case 23:w(!0);case 24:case"end":return t.stop()}}),t)}))),[k,y,C,S,P,M,e]);return Object(K.useEffect)((function(){!m&&("apple"===i&&r||"spotify"===i&&a)?T():u(!1)}),[T,r,m,a,i]),{isLoading:l,data:v,hasError:b}},Ti=function(e){return Object(K.useEffect)(e,[])},Ai=function(e,t){var n=Object(K.useRef)();Object(K.useEffect)((function(){n.current=e}),[e]),Object(K.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])},Ei=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Object(K.useRef)(),i=Object(K.useCallback)((function(){var e=n.current;e&&(n.current=void 0,clearTimeout(e))}),[n]);return Object(K.useEffect)((function(){return n.current=setTimeout(e,t),i}),[e,t,i]),i},Ii=Z.c.div(sn||(sn=Object(Y.a)(["\n  flex: 1;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-right: ",";\n"])),ee.MD),Li=Z.c.h3(ln||(ln=Object(Y.a)(["\n  margin: 0;\n  padding: ",";\n  font-size: 14px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n"])),ee.XXS),zi=Object(Z.c)(Li)(un||(un=Object(Y.a)(["\n  padding: 0 "," ",";\n  margin-top: -4px;\n  font-weight: normal;\n  font-size: 12px;\n  color: rgb(100, 100, 100);\n"])),ee.XXS,ee.XXS),Ni=Z.c.div(dn||(dn=Object(Y.a)(["\n  display: flex;\n  align-items: center;\n  overflow: auto;\n\n  ",";\n"])),(function(e){return e.isActive&&Object(Z.b)(pn||(pn=Object(Y.a)(["\n      "," {\n        padding-right: 0;\n      }\n\n      ",", "," {\n        color: white;\n      }\n      background: linear-gradient(rgb(60, 184, 255) 0%, rgb(52, 122, 181) 100%);\n    "])),Ii,Li,zi)})),Ri=Z.c.img(bn||(bn=Object(Y.a)(["\n  height: 3rem;\n  width: 3rem;\n  margin-right: ",";\n"])),ee.XXS),Wi=Z.c.img(hn||(hn=Object(Y.a)(["\n  margin-left: auto;\n"]))),_i=function(e){var t=e.option,n=e.isActive;return Object(J.jsxs)(Ni,{isActive:n,children:[t.imageUrl&&Object(J.jsx)(Ri,{src:t.imageUrl}),Object(J.jsxs)(Ii,{children:[Object(J.jsx)(Li,{children:t.label}),t.sublabel&&Object(J.jsx)(zi,{children:t.sublabel})]}),n&&Object(J.jsx)(Wi,{src:"arrow_right.svg"})]})},Ui=function(e,t){return t&&e?[t]:[]},Hi=Z.c.div(fn||(fn=Object(Y.a)(["\n  width: 100%;\n  overflow: auto;\n  -webkit-overflow-scrolling: touch;\n"]))),Xi=function(e){var t=e.options,n=e.activeIndex,i=e.loading,r=e.emptyMessage,a=void 0===r?"Nothing to see here":r,o=Object(K.useRef)(null),c=Object(K.useState)(!1),s=Object(Q.a)(c,2),l=s[0],u=s[1];return Ei((function(){return u(!0)}),350),Object(K.useEffect)((function(){var e;l&&o.current&&t.length&&(null===(e=o.current.children[n])||void 0===e||e.scrollIntoView({block:"nearest"}))}),[n,l,t.length]),Object(J.jsx)(ae.a,{children:i?Object(J.jsx)(Sr,{backgroundColor:"white"}):t.length>0?Object(J.jsx)(Hi,{ref:o,children:t.map((function(e,t){return Object(J.jsx)(_i,{option:e,isActive:t===n},"option-".concat(e.label,"-").concat(t))}))}):Object(J.jsx)(re,{showImage:!1,message:a})})},Fi=Z.c.div(jn||(jn=Object(Y.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  text-align: center;\n  height: 100%;\n  background: white;\n"]))),Bi=Z.c.img(vn||(vn=Object(Y.a)(["\n  height: 60px;\n  width: 60px;\n  transition: all 0.5s ease-in-out;\n\n  ",";\n\n  :last-of-type {\n    margin-top: -60px;\n  }\n"])),(function(e){return e.isHidden&&Object(Z.b)(xn||(xn=Object(Y.a)(["\n      opacity: 0;\n    "])))})),Vi=Z.c.h3(On||(On=Object(Y.a)(["\n  margin: "," 0 ",";\n  font-weight: bold;\n  font-size: 18px;\n"])),ee.XS,ee.XXS),Di=Z.c.p(gn||(gn=Object(Y.a)(["\n  font-size: 14px;\n  margin: 0;\n  max-width: 120px;\n  color: rgb(100, 100, 100);\n"]))),Gi={title:{apple:"Apple Music",spotify:"Spotify"},defaultMessage:"Sign into view this content"},Yi=function(e){var t=e.message,n=Object(K.useState)("apple"),i=Object(Q.a)(n,2),r=i[0],a=i[1];return Ai((function(){return a((function(e){return"apple"===e?"spotify":"apple"}))}),4e3),Object(J.jsxs)(Fi,{children:[Object(J.jsx)(Bi,{isHidden:"spotify"===r,alt:"app_icon",src:"apple_music_icon.svg"}),Object(J.jsx)(Bi,{isHidden:"apple"===r,alt:"app_icon",src:"spotify_icon.svg"}),Object(J.jsx)(Vi,{children:Gi.title[r]}),Object(J.jsx)(Di,{children:null!==t&&void 0!==t?t:Gi.defaultMessage})]})},Ki=n(32),Qi=Z.c.div(mn||(mn=Object(Y.a)(["\n  position: relative;\n  display: flex;\n  flex: 1;\n  height: 1em;\n  -webkit-box-reflect: below 0px -webkit-gradient(linear, left top, left bottom, from(transparent), color-stop(60%, transparent), to(rgba(250, 250, 250, 0.1)));\n"]))),Ji=Z.c.div(wn||(wn=Object(Y.a)(["\n  position: relative;\n  flex: 1;\n  margin: 0 8px;\n"]))),qi=Z.c.div(yn||(yn=Object(Y.a)(['\n  position: absolute;\n  width: 100%;\n  background: url("gloss-overlay.svg") repeat-x;\n  background-size: contain;\n  height: 100%;\n']))),Zi=Z.c.div.attrs((function(e){return{style:{width:"".concat(e.percent,"%")}}}))(kn||(kn=Object(Y.a)(["\n  position: relative;\n  height: 100%;\n  background: ",";\n  transition: width 0.1s;\n"])),(function(e){return!e.transparent&&'url("gloss-blue.svg") repeat-x'})),$i=Z.c.img(Sn||(Sn=Object(Y.a)(["\n  position: absolute;\n  height: 100%;\n  right: -8px;\n  filter: brightness(0.85);\n"]))),er=function(e){var t=e.percent,n=e.isScrubber;return Object(J.jsx)(Qi,{children:Object(J.jsxs)(Ji,{children:[Object(J.jsx)(qi,{}),Object(J.jsx)(Zi,{percent:t,transparent:n,children:n&&Object(J.jsx)($i,{src:"scrubber.svg"})})]})})},tr=Z.c.div(Cn||(Cn=Object(Y.a)(["\n  position: relative;\n  display: flex;\n  flex: 1;\n  height: 1em;\n  padding: 0 ",";\n  -webkit-box-reflect: below 0px -webkit-gradient(linear, left top, left bottom, from(transparent), color-stop(60%, transparent), to(rgba(250, 250, 250, 0.1)));\n"])),ee.SM),nr=Z.c.h3(Mn||(Mn=Object(Y.a)(["\n  font-size: 12px;\n  margin: auto 0;\n  width: 30px;\n  text-align: ",";\n  white-space: nowrap;\n"])),(function(e){return e.textAlign})),ir=function(e){var t=e.isScrubbing,n=Se(),i=n.playbackInfo,r=n.seekToTime,a=i.currentTime,o=i.duration,c=i.isPlaying,s=Object(K.useState)(a),l=Object(Q.a)(s,2),u=l[0],d=l[1],p=Object(K.useMemo)((function(){return Math.round(u/o*100)}),[o,u]),b=Object(K.useMemo)((function(){return o-u}),[o,u]),h=Object(K.useState)(!1),f=Object(Q.a)(h,2),j=f[0],v=f[1],x=Object(Ki.useDebouncedCallback)((function(e){r(e),v(!1)}),300),O=Object(K.useCallback)((function(){if(u!==o&&t){var e=u+1;e<o&&(v(!0),x(e),d(e))}}),[u,o,t,x]),g=Object(K.useCallback)((function(){if(0!==u&&t){var e=u-1;e>=0&&(v(!0),x(e),d(e))}}),[u,x,t]),m=Object(K.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(!j&&c||e)&&d(a)}),[a,j,c]);return Ie("forwardscroll",O),Ie("backwardscroll",g),Ai(m,1e3),Object(J.jsxs)(tr,{children:[Object(J.jsx)(nr,{textAlign:"left",children:qe(u)}),Object(J.jsx)(er,{percent:p,isScrubber:!0}),Object(J.jsxs)(nr,{textAlign:"right",children:["-",qe(b)]})]})},rr=Z.c.svg(Pn||(Pn=Object(Y.a)([""]))),ar=function(e){var t=e.size,n=void 0===t?24:t,i=e.className;return Object(J.jsx)(rr,{className:i,version:"1.1",x:"0px",y:"0px",viewBox:"0 0 2400 2400",width:n,height:n,children:Object(J.jsxs)("g",{strokeWidth:"200",strokeLinecap:"round",stroke:"#000000",fill:"none",id:"spinner",children:[Object(J.jsx)("line",{x1:"1200",y1:"600",x2:"1200",y2:"100"}),Object(J.jsx)("line",{opacity:"0.5",x1:"1200",y1:"2300",x2:"1200",y2:"1800"}),Object(J.jsx)("line",{opacity:"0.917",x1:"900",y1:"680.4",x2:"650",y2:"247.4"}),Object(J.jsx)("line",{opacity:"0.417",x1:"1750",y1:"2152.6",x2:"1500",y2:"1719.6"}),Object(J.jsx)("line",{opacity:"0.833",x1:"680.4",y1:"900",x2:"247.4",y2:"650"}),Object(J.jsx)("line",{opacity:"0.333",x1:"2152.6",y1:"1750",x2:"1719.6",y2:"1500"}),Object(J.jsx)("line",{opacity:"0.75",x1:"600",y1:"1200",x2:"100",y2:"1200"}),Object(J.jsx)("line",{opacity:"0.25",x1:"2300",y1:"1200",x2:"1800",y2:"1200"}),Object(J.jsx)("line",{opacity:"0.667",x1:"680.4",y1:"1500",x2:"247.4",y2:"1750"}),Object(J.jsx)("line",{opacity:"0.167",x1:"2152.6",y1:"650",x2:"1719.6",y2:"900"}),Object(J.jsx)("line",{opacity:"0.583",x1:"900",y1:"1719.6",x2:"650",y2:"2152.6"}),Object(J.jsx)("line",{opacity:"0.083",x1:"1750",y1:"247.4",x2:"1500",y2:"680.4"}),Object(J.jsx)("animateTransform",{attributeName:"transform",attributeType:"XML",type:"rotate",keyTimes:"0;0.08333;0.16667;0.25;0.33333;0.41667;0.5;0.58333;0.66667;0.75;0.83333;0.91667",values:"0 1199 1199;30 1199 1199;60 1199 1199;90 1199 1199;120 1199 1199;150 1199 1199;180 1199 1199;210 1199 1199;240 1199 1199;270 1199 1199;300 1199 1199;330 1199 1199",dur:"0.83333s",begin:"0s",repeatCount:"indefinite",calcMode:"discrete"})]})})},or=Z.c.div(Tn||(Tn=Object(Y.a)(["\n  position: relative;\n  display: flex;\n  flex: 1;\n  height: 1em;\n  padding: 0 ",";\n  -webkit-box-reflect: below 0px -webkit-gradient(linear, left top, left bottom, from(transparent), color-stop(60%, transparent), to(rgba(250, 250, 250, 0.1)));\n"])),ee.SM),cr=Z.c.h3(An||(An=Object(Y.a)(["\n  font-size: 12px;\n  margin: auto 0;\n  width: 30px;\n  text-align: ",";\n"])),(function(e){return e.textAlign})),sr=function(){var e=Se(),t=e.playbackInfo,n=e.updatePlaybackInfo,i=t.isLoading,r=t.isPlaying,a=t.isPaused,o=t.currentTime,c=t.percent,s=t.timeRemaining;return Ai((function(){r&&!a&&n()}),1e3),Object(J.jsxs)(or,{children:[i?Object(J.jsx)(ar,{size:14}):Object(J.jsx)(cr,{textAlign:"left",children:qe(o)}),Object(J.jsx)(er,{percent:c}),Object(J.jsxs)(cr,{textAlign:"right",children:["-",qe(s)]})]})},lr=Z.c.div(En||(En=Object(Y.a)(["\n  position: relative;\n  display: flex;\n  flex: 1;\n  height: 1em;\n  padding: 0 ",";\n  -webkit-box-reflect: below 0px -webkit-gradient(linear, left top, left bottom, from(transparent), color-stop(60%, transparent), to(rgba(250, 250, 250, 0.1)));\n"])),ee.SM),ur=Z.c.img(In||(In=Object(Y.a)(["\n  font-size: 12px;\n  margin: auto 0;\n  width: 30px;\n  height: 16px;\n"]))),dr=function(e){var t=e.percent;return Object(J.jsxs)(lr,{children:[Object(J.jsx)(ur,{src:"volume_mute.svg"}),Object(J.jsx)(er,{percent:t}),Object(J.jsx)(ur,{src:"volume_full.svg"})]})},pr=Z.c.div(Ln||(Ln=Object(Y.a)(["\n  position: relative;\n  width: 100%;\n  padding: 0 "," ",";\n"])),ee.MD,ee.MD),br=Z.c.div(zn||(zn=Object(Y.a)(["\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: ",";\n  right: ",";\n  transition: transform 0.3s;\n\n  transform: ",";\n"])),ee.XS,ee.XS,(function(e){return e.isHidden&&"translateX(-110%)"})),hr=Z.c.div(Nn||(Nn=Object(Y.a)(["\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: ",";\n  right: ",";\n  transition: transform 0.3s;\n\n  transform: ",";\n"])),ee.XS,ee.XS,(function(e){return e.isHidden&&"translateX(110%)"})),fr=function(){var e=Ce(),t=e.volume,n=e.active,i=e.setEnabled,r=Object(K.useState)(!1),a=Object(Q.a)(r,2),o=a[0],c=a[1],s=Object(K.useCallback)((function(){o?(i(!0),c(!1)):(i(!1),c(!0))}),[o,i]);return Ie("centerclick",s),Object(J.jsxs)(pr,{children:[Object(J.jsx)(br,{isHidden:o,children:n&&!o&&Object(J.jsx)(dr,{percent:100*t})}),Object(J.jsx)(br,{hidden:n&&!o,isHidden:o,children:Object(J.jsx)(sr,{})}),Object(J.jsx)(hr,{isHidden:!o,children:Object(J.jsx)(ir,{isScrubbing:o})})]})},jr=Z.c.div(Rn||(Rn=Object(Y.a)(["\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0 6px;\n  height: 20px;\n  background: linear-gradient(180deg, #feffff 0%, #b1b6b9 100%);\n  border-bottom: 1px solid #7995a3;\n  box-sizing: border-box;\n"]))),vr=Z.c.h3(Wn||(Wn=Object(Y.a)(["\n  margin: 0;\n  font-size: 13px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n"]))),xr=Z.c.div(_n||(_n=Object(Y.a)(["\n  display: flex;\n"]))),Or=Z.c.img(Un||(Un=Object(Y.a)(["\n  max-height: 12px;\n  margin-left: 8px;\n"]))),gr=function(){var e=ci().headerTitle,t=Se().playbackInfo,n=t.isPlaying,i=t.isPaused,r=t.isLoading;return e?Object(J.jsxs)(jr,{children:[Object(J.jsx)(vr,{children:e}),Object(J.jsxs)(xr,{children:[r&&Object(J.jsx)(xr,{children:Object(J.jsx)(ar,{size:10})}),n&&!i&&Object(J.jsx)(Or,{src:"play.svg"}),i&&Object(J.jsx)(Or,{src:"pause.svg"}),Object(J.jsx)(Or,{src:"battery.svg"})]})]}):null},mr=Z.c.div(Hn||(Hn=Object(Y.a)([""]))),wr=Z.c.img(Xn||(Xn=Object(Y.a)(["\n  z-index: ",";\n  position: absolute;\n  height: 100%;\n  right: 0;\n  animation: "," 20s;\n  opacity: ",";\n  transition: opacity 2s;\n\n  @keyframes kenBurns {\n    0% {\n      transform: translateX(0%);\n    }\n\n    100% {\n      transform: translateX(10%);\n    }\n  }\n"])),(function(e){return e.zIndex}),(function(e){return e.startedAnimation&&"kenBurns"}),(function(e){return e.isHidden&&0})),yr=function(e){var t=e.urls,n=Object(K.useState)([]),i=Object(Q.a)(n,2),r=i[0],a=i[1],o=Object(K.useState)(!1),c=Object(Q.a)(o,2),s=c[0],l=c[1],u=Object(K.useRef)();Object(K.useEffect)((function(){a(t)}),[t]);var d=Object(K.useCallback)((function(){return l(!0),u.current=setTimeout((function(){var e=r.slice(1);a([].concat(Object(oe.a)(e),[r[0]])),l(!1)}),2e3),function(){u.current&&clearTimeout(u.current)}}),[r]);return Ai(d,5e3),Object(J.jsx)(mr,{children:r.slice(0,2).map((function(e,t){return Object(J.jsx)(wr,{zIndex:3-t,src:e,startedAnimation:0===t||s,isHidden:s&&0===t},"ken-burns-".concat(e))}))})},kr=Object(Z.c)(Ke.a.div)(Fn||(Fn=Object(Y.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin: auto;\n  background: ",";\n"])),(function(e){return e.backgroundColor})),Sr=function(e){var t=e.size,n=e.backgroundColor;return Object(J.jsx)(kr,Object(ue.a)(Object(ue.a)({},Ve),{},{backgroundColor:n,children:Object(J.jsx)("svg",{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 2400 2400",width:t||24,height:t||24,children:Object(J.jsxs)("g",{strokeWidth:"200",strokeLinecap:"round",stroke:"#000000",fill:"none",id:"spinner",children:[Object(J.jsx)("line",{x1:"1200",y1:"600",x2:"1200",y2:"100"}),Object(J.jsx)("line",{opacity:"0.5",x1:"1200",y1:"2300",x2:"1200",y2:"1800"}),Object(J.jsx)("line",{opacity:"0.917",x1:"900",y1:"680.4",x2:"650",y2:"247.4"}),Object(J.jsx)("line",{opacity:"0.417",x1:"1750",y1:"2152.6",x2:"1500",y2:"1719.6"}),Object(J.jsx)("line",{opacity:"0.833",x1:"680.4",y1:"900",x2:"247.4",y2:"650"}),Object(J.jsx)("line",{opacity:"0.333",x1:"2152.6",y1:"1750",x2:"1719.6",y2:"1500"}),Object(J.jsx)("line",{opacity:"0.75",x1:"600",y1:"1200",x2:"100",y2:"1200"}),Object(J.jsx)("line",{opacity:"0.25",x1:"2300",y1:"1200",x2:"1800",y2:"1200"}),Object(J.jsx)("line",{opacity:"0.667",x1:"680.4",y1:"1500",x2:"247.4",y2:"1750"}),Object(J.jsx)("line",{opacity:"0.167",x1:"2152.6",y1:"650",x2:"1719.6",y2:"900"}),Object(J.jsx)("line",{opacity:"0.583",x1:"900",y1:"1719.6",x2:"650",y2:"2152.6"}),Object(J.jsx)("line",{opacity:"0.083",x1:"1750",y1:"247.4",x2:"1500",y2:"680.4"}),Object(J.jsx)("animateTransform",{attributeName:"transform",attributeType:"XML",type:"rotate",keyTimes:"0;0.08333;0.16667;0.25;0.33333;0.41667;0.5;0.58333;0.66667;0.75;0.83333;0.91667",values:"0 1199 1199;30 1199 1199;60 1199 1199;90 1199 1199;120 1199 1199;150 1199 1199;180 1199 1199;210 1199 1199;240 1199 1199;270 1199 1199;300 1199 1199;330 1199 1199",dur:"0.83333s",begin:"0s",repeatCount:"indefinite",calcMode:"discrete"})]})})}))},Cr=Z.c.div(Bn||(Bn=Object(Y.a)(["\n  height: 100%;\n  overflow: hidden;\n"]))),Mr=Z.c.div(Vn||(Vn=Object(Y.a)(["\n  display: flex;\n  height: 70%;\n  padding: 0 ",";\n"])),ee.XS),Pr=Z.c.div(Dn||(Dn=Object(Y.a)(["\n  height: 8em;\n  width: 8em;\n  margin: auto ",";\n  -webkit-box-reflect: below 0px -webkit-gradient(linear, left top, left bottom, from(transparent), color-stop(70%, transparent), to(rgba(250, 250, 250, 0.1)));\n  transform-style: preserve-3d;\n  perspective: 500px;\n  opacity: ",";\n"])),ee.SM,(function(e){return e.isHidden&&0})),Tr=Z.c.img(Gn||(Gn=Object(Y.a)(["\n  height: 100%;\n  width: 100%;\n  transform: rotateY(18deg);\n  border: 1px solid #f3f3f3;\n"]))),Ar=Z.c.div(Yn||(Yn=Object(Y.a)(["\n  flex: 1;\n  margin: auto 0 auto ",";\n"])),ee.XS),Er=Z.c.h3(Kn||(Kn=Object(Y.a)(["\n  margin: 0;\n  font-size: 0.92rem;\n"]))),Ir=Object(Z.c)(Er)(Qn||(Qn=Object(Y.a)(["\n  color: rgb(99, 101, 103);\n  font-size: 0.75rem;\n"]))),Lr=Z.c.div(Jn||(Jn=Object(Y.a)(["\n  display: flex;\n  align-items: center;\n  height: 30%;\n"]))),zr=function(e){var t,n=e.hideArtwork,i=e.onHide,r=Se(),a=r.nowPlayingItem,o=r.updateNowPlayingItem,c=r.updatePlaybackInfo,s=Object(K.useCallback)((function(e){e.state===MusicKit.PlaybackStates.completed&&i()}),[i]);return Ti((function(){o(),c()})),Ee("playbackStateDidChange",s),Object(J.jsxs)(Cr,{children:[Object(J.jsxs)(Mr,{children:[Object(J.jsx)(Pr,{isHidden:n,children:Object(J.jsx)(Tr,{src:null===a||void 0===a||null===(t=a.artwork)||void 0===t?void 0:t.url})}),Object(J.jsxs)(Ar,{children:[Object(J.jsx)(Er,{children:null===a||void 0===a?void 0:a.name}),Object(J.jsx)(Ir,{children:null===a||void 0===a?void 0:a.artistName}),Object(J.jsx)(Ir,{children:null===a||void 0===a?void 0:a.albumName})]})]}),Object(J.jsx)(Lr,{children:Object(J.jsx)(fr,{})})]})},Nr=n(33),Rr=n(34),Wr=n(36),_r=n(35),Ur=Z.c.div(qn||(qn=Object(Y.a)(["\n  user-select: none;\n  position: relative;\n  display: flex;\n  justify-content: center;\n  margin: auto 0;\n  touch-action: none;\n  transform: translate3d(0, 0, 0);\n"]))),Hr=Z.c.div(Zn||(Zn=Object(Y.a)(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: ","px;\n  height: ","px;\n"])),(function(e){return e.width}),(function(e){return e.height})),Xr=Z.c.canvas($n||($n=Object(Y.a)(["\n  border-radius: 50%;\n  border: 1px solid #b9b9b9;\n  background: white;\n"]))),Fr=Z.c.div(ei||(ei=Object(Y.a)(["\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin: auto;\n  width: ","px;\n  height: ","px;\n  border-radius: 50%;\n  box-shadow: rgb(191, 191, 191) 0px 1em 3em inset;\n  background: rgb(225, 225, 225);\n  border: 1px solid #b9b9b9;\n\n  :active {\n    filter: brightness(0.9);\n  }\n"])),(function(e){return e.size/2.5}),(function(e){return e.size/2.5})),Br=Z.c.img(ti||(ti=Object(Y.a)(["\n  position: absolute;\n  margin: ",";\n  top: ",";\n  bottom: ",";\n  left: ",";\n  right: ",";\n  user-select: none;\n  pointer-events: none;\n  max-height: 13px;\n"])),(function(e){return e.margin}),(function(e){return e.top}),(function(e){return e.bottom}),(function(e){return e.left}),(function(e){return e.right})),Vr=function(e){Object(Wr.a)(n,e);var t=Object(_r.a)(n);function n(e){var i;return Object(Nr.a)(this,n),(i=t.call(this,e)).handleLongPress=function(e){return e.preventDefault(),e.target.setAttribute("longpress",(new Date).getTime()),i.props.onLongPress(e),!1},i.handleMenuLongPress=function(e){i.props.onMenuLongPress(e)},i.handleWheelLongPress=function(e){e.preventDefault(),e.target.setAttribute("longpress",(new Date).getTime());var t=e.target.getBoundingClientRect(),n=e.detail.clientX-t.left,r=e.detail.clientY-t.top,a=t.width;1===i.findClickQuadrant(a,n,r)&&i.handleMenuLongPress(e)},i.getArcToValue=function(e){var t,n,r=i.props.log?Math.log(Math.pow(e/i.props.min,i.angleArc))/Math.log(i.props.max/i.props.min):(e-i.props.min)*i.angleArc/(i.props.max-i.props.min);return n=i.props.clockwise?(t=i.startAngle-1e-5)+r+1e-5:(t=i.endAngle+1e-5)-r-1e-5,i.props.cursor&&(t=n-i.cursorExt,n+=i.cursorExt),{startAngle:t,endAngle:n,acw:!i.props.clockwise&&!i.props.cursor}},i.getCanvasScale=function(e){return(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI||1)/(e.webkitBackingStorePixelRatio||1)},i.coerceToStep=function(e){var t=i.props.log?Math.pow(i.props.step,~~((Math.abs(e)<1?-.5:.5)+Math.log(e)/Math.log(i.props.step))):~~((e<0?-.5:.5)+e/i.props.step)*i.props.step;return t=Math.max(Math.min(t,i.props.max),i.props.min),isNaN(t)&&(t=0),Math.round(1e3*t)/1e3},i.eventToValue=function(e){var t=i.canvasRef.getBoundingClientRect(),n=e.clientX-t.left,r=e.clientY-t.top,a=Math.atan2(n-i.w/2,i.w/2-r)-i.angleOffset;i.props.clockwise||(a=i.angleArc-a-2*Math.PI),i.angleArc!==2*Math.PI&&a<0&&a>-.5?a=0:a<0&&(a+=2*Math.PI);var o=i.props.log?Math.pow(i.props.max/i.props.min,a/i.angleArc)*i.props.min:a*(i.props.max-i.props.min)/i.angleArc+i.props.min;return i.coerceToStep(o)},i.handleMouseDown=function(e){i.props.onChange(i.eventToValue(e)),document.addEventListener("mousemove",i.handleMouseMove),document.addEventListener("mouseup",i.handleMouseUpNoMove)},i.handleTouchStart=function(e){i.props.onChange(i.eventToValue(e)),document.addEventListener("touchmove",i.handleTouchMove),document.addEventListener("touchend",i.handleTouchEndNoMove),document.removeEventListener("mousedown",i.handleMouseDown)},i.handleMouseMove=function(e){e.preventDefault(),i.eventToValue(e)!==i.props.value&&i.props.onChange(i.eventToValue(e)),document.removeEventListener("mouseup",i.handleMouseUpNoMove),document.addEventListener("mouseup",i.handleMouseUp)},i.handleTouchMove=function(e){e.preventDefault();var t=e.targetTouches.length-1,n=i.eventToValue(e.targetTouches[t]);n!==i.props.value&&i.props.onChange(n),i.canvasRef.removeEventListener("long-press",i.handleWheelLongPress),document.removeEventListener("touchend",i.handleTouchEndNoMove),document.addEventListener("touchend",i.handleTouchEnd)},i.handleMouseUp=function(e){i.props.onChangeEnd(i.eventToValue(e)),document.removeEventListener("mousemove",i.handleMouseMove),document.removeEventListener("mouseup",i.handleMouseUp)},i.handleTouchEnd=function(e){var t=e.targetTouches.length-1;i.props.onChangeEnd(e.targetTouches[t]),document.removeEventListener("touchmove",i.handleTouchMove),document.removeEventListener("touchend",i.handleTouchEnd),i.canvasRef.addEventListener("long-press",i.handleWheelLongPress)},i.findClickQuadrant=function(e,t,n){return n<e/4?1:n>.75*e?2:t<e/4?3:t>.75*e?4:-1},i.handleMouseUpNoMove=function(e){var t=e.target.getBoundingClientRect(),n=e.clientX-t.left,r=e.clientY-t.top,a=t.width,o=i.findClickQuadrant(a,n,r);o>0&&o<=4&&i.props.onWheelClick(o),document.removeEventListener("mousemove",i.handleMouseMove),document.removeEventListener("mouseup",i.handleMouseUp),document.removeEventListener("mouseup",i.handleMouseUpNoMove)},i.handleTouchEndNoMove=function(e){var t=e.target.getBoundingClientRect(),n=e.changedTouches[e.changedTouches.length-1],r=n.pageX-t.left,a=n.pageY-t.top,o=t.width,c=i.findClickQuadrant(o,r,a);c>0&&c<=4&&i.props.onWheelClick(c),document.removeEventListener("touchmove",i.handleTouchMove),document.removeEventListener("touchend",i.handleTouchEnd),document.removeEventListener("touchend",i.handleTouchEndNoMove)},i.handleEsc=function(e){27===e.keyCode&&(e.preventDefault(),i.handleMouseUp())},i.handleTextInput=function(e){var t=Math.max(Math.min(+e.target.value,i.props.max),i.props.min)||i.props.min;i.props.onChange(t)},i.handleWheel=function(e){e.preventDefault(),e.deltaX>0||e.deltaY>0?i.props.onChange(i.coerceToStep(i.props.log?i.props.value*i.props.step:i.props.value+i.props.step)):(e.deltaX<0||e.deltaY<0)&&i.props.onChange(i.coerceToStep(i.props.log?i.props.value/i.props.step:i.props.value-i.props.step))},i.handleArrowKey=function(e){37===e.keyCode||40===e.keyCode?(e.preventDefault(),i.props.onChange(i.coerceToStep(i.props.log?i.props.value/i.props.step:i.props.value-i.props.step))):38!==e.keyCode&&39!==e.keyCode||(e.preventDefault(),i.props.onChange(i.coerceToStep(i.props.log?i.props.value*i.props.step:i.props.value+i.props.step)))},i.inputStyle=function(){return{width:"".concat(i.w/2+4>>0,"px"),height:"".concat(i.w/3>>0,"px"),position:"absolute",verticalAlign:"middle",marginTop:"".concat(i.w/3>>0,"px"),marginLeft:"-".concat(3*i.w/4+2>>0,"px"),border:0,outline:"none",background:"none",font:"".concat(i.props.fontWeight," ").concat(i.w/i.digits>>0,"px ").concat(i.props.font),textAlign:"center",color:i.props.inputColor||i.props.fgColor,padding:"0px",WebkitAppearance:"none",cursor:"pointer"}},i.w=i.props.width||200,i.h=i.props.height||i.w,i.cursorExt=!0===i.props.cursor?.3:i.props.cursor/100,i.angleArc=i.props.angleArc*Math.PI/180,i.angleOffset=i.props.angleOffset*Math.PI/180,i.startAngle=1.5*Math.PI+i.angleOffset,i.endAngle=1.5*Math.PI+i.angleOffset+i.angleArc,i.digits=Math.max(String(Math.abs(i.props.min)).length,String(Math.abs(i.props.max)).length,2)+2,i.centerButtonRef=Object(K.createRef)(),i}return Object(Rr.a)(n,[{key:"componentDidMount",value:function(){var e="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;this.drawCanvas(),e?this.canvasRef.addEventListener("touchstart",this.handleTouchStart):this.canvasRef.addEventListener("mousedown",this.handleMouseDown),this.centerButtonRef.current.addEventListener("long-press",this.handleLongPress),this.canvasRef.addEventListener("long-press",this.handleWheelLongPress)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.width&&this.w!==e.width&&(this.w=e.width),e.height&&this.h!==e.height&&(this.h=e.height)}},{key:"componentDidUpdate",value:function(){this.drawCanvas()}},{key:"componentWillUnmount",value:function(){this.canvasRef.removeEventListener("touchstart",this.handleTouchStart),this.centerButtonRef.current.removeEventListener("long-press",this.handleLongPress)}},{key:"drawCanvas",value:function(){var e=this.canvasRef.getContext("2d"),t=this.getCanvasScale(e);this.canvasRef.width=this.w*t,this.canvasRef.height=this.h*t,e.scale(t,t),this.xy=this.w/2,this.lineWidth=this.xy*this.props.thickness,this.radius=this.xy-this.lineWidth/2,e.lineWidth=this.lineWidth,e.lineCap=this.props.lineCap,e.beginPath(),e.strokeStyle=this.props.bgColor,e.arc(this.xy,this.xy,this.radius,this.endAngle-1e-5,this.startAngle+1e-5,!0),e.stroke();var n=this.getArcToValue(this.props.value);e.beginPath(),e.strokeStyle=this.props.fgColor,e.arc(this.xy,this.xy,this.radius,n.startAngle,n.endAngle,n.acw),e.stroke()}},{key:"render",value:function(){var e=this,t=this.props,n=t.canvasClassName,i=t.onClick;return Object(J.jsx)(Ur,{children:Object(J.jsxs)(Hr,{width:this.w,height:this.h,children:[Object(J.jsx)(Xr,{ref:function(t){e.canvasRef=t},className:n,style:{width:"100%",height:"100%"}}),Object(J.jsx)(Fr,{ref:this.centerButtonRef,onClick:i,size:this.w}),Object(J.jsx)(Br,{top:"8%",margin:"0 auto",src:"menu.svg"}),Object(J.jsx)(Br,{right:"8%",margin:"auto 0",src:"fast_forward.svg"}),Object(J.jsx)(Br,{left:"8%",margin:"auto 0",src:"rewind.svg"}),Object(J.jsx)(Br,{bottom:"8%",margin:"0 auto",src:"play_pause.svg"})]})})}}]),n}(K.Component);Vr.defaultProps={onChangeEnd:function(){},onWheelClick:function(){},onClick:function(){},onLongPress:function(){},onMenuLongPress:function(){},min:0,max:100,step:1,log:!1,width:200,height:200,thickness:.35,lineCap:"butt",bgColor:"#EEE",fgColor:"#EA2",inputColor:"",font:"Arial",fontWeight:"bold",clockwise:!0,cursor:!1,stopper:!0,disableTextInput:!1,displayInput:!0,angleArc:360,angleOffset:0,className:null,canvasClassName:null};var Dr,Gr,Yr=Vr;!function(e){e[e.TOP=1]="TOP",e[e.BOTTOM=2]="BOTTOM",e[e.LEFT=3]="LEFT",e[e.RIGHT=4]="RIGHT"}(Dr||(Dr={})),function(e){e[e.ARROW_UP=38]="ARROW_UP",e[e.ARROW_DOWN=40]="ARROW_DOWN",e[e.ARROW_LEFT=37]="ARROW_LEFT",e[e.ARROW_RIGHT=39]="ARROW_RIGHT",e[e.ESC=27]="ESC",e[e.ENTER=13]="ENTER",e[e.SPACE=32]="SPACE"}(Gr||(Gr={}));var Kr,Qr,Jr,qr,Zr,$r,ea,ta,na,ia,ra,aa,oa,ca,sa,la,ua,da,pa,ba,ha,fa,ja,va,xa,Oa,ga,ma,wa,ya=new Event("centerclick"),ka=new Event("centerlongclick"),Sa=new Event("forwardscroll"),Ca=new Event("backwardscroll"),Ma=new Event("wheelclick"),Pa=new Event("menuclick"),Ta=new Event("menulongpress"),Aa=new Event("backclick"),Ea=new Event("forwardclick"),Ia=new Event("playpauseclick"),La=new Event("idle"),za=function(){var e=Object(K.useState)(0),t=Object(Q.a)(e,2),n=t[0],i=t[1],r=Object(K.useRef)(),a=Object(K.useCallback)((function(){return window.dispatchEvent(ya)}),[]),o=Object(K.useCallback)((function(e){e.preventDefault(),window.dispatchEvent(ka)}),[]),c=Object(K.useCallback)((function(e){e.preventDefault(),window.dispatchEvent(Ta)}),[]),s=Object(K.useCallback)((function(){return window.dispatchEvent(Sa)}),[]),l=Object(K.useCallback)((function(){window.dispatchEvent(Ca)}),[]),u=Object(K.useCallback)((function(){clearTimeout(r.current),r.current=setTimeout((function(){window.dispatchEvent(La)}),1e4)}),[]),d=Object(K.useCallback)((function(e){switch(window.dispatchEvent(Ma),e){case Dr.TOP:window.dispatchEvent(Pa);break;case Dr.BOTTOM:window.dispatchEvent(Ia);break;case Dr.LEFT:window.dispatchEvent(Aa);break;case Dr.RIGHT:window.dispatchEvent(Ea)}u()}),[u]),p=Object(K.useCallback)((function(e){switch(e.keyCode){case Gr.ARROW_UP:case Gr.ARROW_LEFT:l();break;case Gr.ARROW_DOWN:case Gr.ARROW_RIGHT:s();break;case Gr.ENTER:a();break;case Gr.SPACE:d(Dr.BOTTOM);break;case Gr.ESC:d(Dr.TOP)}u()}),[u,l,s,a,d]),b=Object(K.useCallback)((function(e){0===e&&100===n?s():100===e&&0===n?l():e>n?s():e<n&&l(),i(e),u()}),[n,s,l,u]);return Ie("keydown",p),Ti(u),Object(J.jsx)(Yr,{value:n,min:0,max:100,width:220,height:220,step:5,fgColor:"transparent",bgColor:"white",thickness:.6,onClick:a,onLongPress:o,onMenuLongPress:c,onWheelClick:d,onChange:b})},Na=Object(Z.c)(Ke.a.div)(Kr||(Kr=Object(Y.a)(["\n  z-index: ",";\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n"])),(function(e){return e.index})),Ra=Z.c.div(Qr||(Qr=Object(Y.a)(["\n  position: relative;\n  width: 100%;\n  padding: "," 0;\n  background: linear-gradient(180deg, #bbbcbf 0%, #626770 11.69%, #626770 100%);\n  box-shadow: 0 0px 4px black;\n"])),ee.XS),Wa=Z.c.h3(Jr||(Jr=Object(Y.a)(["\n  margin: 0;\n  padding: "," ",";\n  font-size: 16px;\n  background: linear-gradient(180deg, #ffffff 0%, #cbccce 48.44%, #dfdfdf 100%);\n  border: 3px solid #3e4249;\n  border-radius: 12px;\n  text-shadow: 0px 0px 1px #505050;\n"])),ee.XS,ee.XXS),_a=Z.c.div(qr||(qr=Object(Y.a)(["\n  padding: "," ",";\n  text-align: center;\n  border: 3px solid transparent;\n\n  ",";\n\n  :last-of-type {\n    margin-top: ",";\n\n    "," {\n      background: linear-gradient(\n        180deg,\n        #707379 0%,\n        #3b3f46 48.44%,\n        #363c44 100%\n      );\n      color: white;\n    }\n  }\n"])),ee.XXS,ee.MD,(function(e){return e.highlighted&&Object(Z.b)(Zr||(Zr=Object(Y.a)(["\n      "," {\n        background: linear-gradient(\n          rgb(60, 184, 255) 0%,\n          rgb(52, 122, 181) 100%\n        ) !important;\n        color: white !important;\n        border: 3px solid #ececec;\n      }\n    "])),Wa)}),ee.XXS,Wa),Ua=function(e){var t=e.windowStack,n=e.index,i=e.isHidden,r=ci().hideWindow,a=t[n];Le(a.id);var o=Object(K.useMemo)((function(){var e=a.type===tn.ACTION_SHEET?a.listOptions:[];return[].concat(Object(oe.a)(e),[{type:"Action",label:"Cancel",onSelect:function(){}}])}),[a]);Ie("centerclick",(function(){r()}));var c=ri(a.id,o),s=Object(Q.a)(c,1)[0];return Object(J.jsx)(Na,Object(ue.a)(Object(ue.a)({"data-window-id":a.id,index:n},Fe),{},{children:Object(J.jsx)(Ra,{isHidden:i,children:o.map((function(e,t){return Object(J.jsx)(_a,{highlighted:s===t,children:Object(J.jsx)(Wa,{children:e.label})},"popup-option-".concat(e.label))}))})}))},Ha=Z.c.div($r||($r=Object(Y.a)(["\n  z-index: 4;\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  background: ",";\n  transition: all 0.25s ease;\n"])),(function(e){return e.isHidden?"transparent":"rgba(0, 0, 0, 0.5)"})),Xa=function(e){var t=e.windowStack,n=0===t.length;return Object(J.jsx)(Ha,{"data-stack-type":"action-sheet",isHidden:n,children:Object(J.jsx)(ae.a,{children:t.map((function(e,n){return Object(J.jsx)(Ua,{windowStack:t,index:n,isHidden:n<t.length-1},"window-".concat(e.id))}))})})},Fa=Object(Z.c)(Ke.a.div)(ea||(ea=Object(Y.a)(["\n  z-index: 0;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n"]))),Ba=function(e){var t=e.window,n=(null===t||void 0===t?void 0:t.type)===tn.COVER_FLOW?t.component:null;return Object(J.jsx)(ae.a,{children:!!n&&Object(J.jsxs)(Fa,Object(ue.a)(Object(ue.a)({},Ve),{},{"data-stack-type":"coverflow",children:[Object(J.jsx)(gr,{}),Object(J.jsx)(n,{})]}))})},Va=Object(Z.c)(Ke.a.div)(ta||(ta=Object(Y.a)(["\n  z-index: ",";\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"])),(function(e){return e.index})),Da=Z.c.div(na||(na=Object(Y.a)(["\n  position: relative;\n  background: linear-gradient(\n    180deg,\n    #a2a8b7 0%,\n    rgba(38, 52, 88, 0.92) 20.6%,\n    #28365a 100%\n  );\n  width: 80%;\n  padding: ",";\n  box-shadow: 0px 6px 5px rgba(0, 0, 0, 0.39);\n  border: 2.5px solid white;\n  border-radius: 12px;\n  color: white;\n  font-weight: 500;\n  text-align: center;\n"])),ee.XXS),Ga=Z.c.h3(ia||(ia=Object(Y.a)(["\n  margin: "," 0 ",";\n  font-size: 16px;\n"])),ee.XS,ee.XS),Ya=Object(Z.c)(Ga)(ra||(ra=Object(Y.a)(["\n  margin: "," 0 ",";\n  font-size: 14px;\n  font-weight: 400;\n"])),ee.XS,ee.XS),Ka=Z.c.div(aa||(aa=Object(Y.a)(["\n  display: flex;\n"]))),Qa=Z.c.h3(oa||(oa=Object(Y.a)(["\n  margin: 0;\n  padding: "," ",";\n  font-size: 16px;\n  background: linear-gradient(180deg, #8c94a8 0%, #334164 44.97%, #445070 100%);\n  border: 2px solid #242e47;\n  border-radius: 8px;\n\n  text-shadow: 0px 0px 1px #505050;\n"])),ee.XS,ee.XXS),Ja=Z.c.div(ca||(ca=Object(Y.a)(["\n  flex: 1;\n  text-align: center;\n  border: 2px solid transparent;\n  margin-top: 8px;\n\n  ",";\n"])),(function(e){return e.highlighted&&Object(Z.b)(sa||(sa=Object(Y.a)(["\n      "," {\n        border: 2px solid #ececec;\n        filter: brightness(120%);\n      }\n    "])),Qa)})),qa=function(e){var t=e.windowStack,n=e.index,i=e.isHidden,r=t[n];Le(r.id);var a=ci().hideWindow;if(r.type!==tn.POPUP)throw new Error("Popup option not supplied");var o=Object(K.useMemo)((function(){var e=r.type===tn.POPUP?r.listOptions:[];return e.length?e:[{type:"Action",label:"Done",onSelect:function(){}}]}),[r.listOptions,r.type]),c=ri(r.id,o),s=Object(Q.a)(c,1)[0];return Ie("centerclick",(function(){a()})),Object(J.jsx)(Va,Object(ue.a)(Object(ue.a)({"data-window-id":r.id,index:n},Be),{},{children:Object(J.jsxs)(Da,{isHidden:i,children:[Object(J.jsx)(Ga,{children:r.title}),Object(J.jsx)(Ya,{children:r.description}),Object(J.jsx)(Ka,{children:o.map((function(e,t){return Object(J.jsx)(Ja,{highlighted:s===t,children:Object(J.jsx)(Qa,{children:e.label})},"popup-option-".concat(e.label))}))})]})}))},Za=Object(Z.c)(Ke.a.div)(la||(la=Object(Y.a)(["\n  z-index: ",";\n  position: absolute;\n  top: ",";\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: white;\n"])),(function(e){return e.index}),(function(e){return e.showHeader?"20px":0})),$a=Z.c.div(ua||(ua=Object(Y.a)(["\n  height: 100%;\n  transition: transform 0.3s;\n  transform: ",";\n  overflow: auto;\n"])),(function(e){return e.isHidden&&"translateX(-100%)"})),eo=function(e){var t=e.windowStack,n=e.index,i=e.isHidden,r=ci().headerTitle,a=t[n],o=0===n,c=Object(K.useMemo)((function(){switch(a.type){case tn.FULL:case tn.SPLIT:case tn.COVER_FLOW:return a.component;default:return null}}),[a]);return Object(J.jsx)(Za,Object(ue.a)(Object(ue.a)({"data-window-id":a.id,index:n,showHeader:!!r},o?Ye:Xe),{},{children:Object(J.jsx)($a,{isHidden:i,children:Object(J.jsx)(c,{})})}))},to=Z.c.div(da||(da=Object(Y.a)(["\n  z-index: 3;\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  background: white;\n  transition: all 0.35s;\n  transform: ",";\n"])),(function(e){return e.isHidden&&"translateX(100%)"})),no=function(e){var t=e.windowStack,n=0===t.length;return Object(J.jsxs)(to,{"data-stack-type":"fullscreen",isHidden:n,children:[Object(J.jsx)(gr,{}),Object(J.jsx)(ae.a,{children:t.map((function(e,n){return Object(J.jsx)(eo,{windowStack:t,index:n,isHidden:n<t.length-1},"window-".concat(e.id))}))})]})},io=Z.c.div(pa||(pa=Object(Y.a)(["\n  z-index: 4;\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  background: ",";\n  transition: all 0.25s ease;\n"])),(function(e){return e.isHidden?"transparent":"rgba(0, 0, 0, 0.3)"})),ro=function(e){var t=e.windowStack,n=0===t.length;return Object(J.jsx)(io,{"data-stack-type":"popup",isHidden:n,children:Object(J.jsx)(ae.a,{children:t.map((function(e,n){return Object(J.jsx)(qa,{windowStack:t,index:n,isHidden:n<t.length-1},"window-".concat(e.id))}))})})},ao=Z.c.div(ba||(ba=Object(Y.a)(["\n  z-index: 0;\n  position: relative;\n  flex: 0 0 50%;\n  background: white;\n  transition: all 0.35s;\n\n  ",";\n"])),(function(e){return e.isHidden&&Object(Z.b)(ha||(ha=Object(Y.a)(["\n      transform: translateX(100%);\n      opacity: 0;\n      overflow: hidden;\n    "])))})),oo=function(e){var t=e.isHidden,n=ci().preview,i=Wt[n];return Object(J.jsxs)(ao,{isHidden:t,children:[Object(J.jsx)(ae.a,{children:n===V.MUSIC&&Object(J.jsx)(i,{})}),n!==V.MUSIC&&Object(J.jsx)(i,{})]})},co=Z.c.div(fa||(fa=Object(Y.a)(["\n  z-index: 2;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  display: flex;\n"]))),so=Z.c.div(ja||(ja=Object(Y.a)(["\n  z-index: 1;\n  position: relative;\n  flex: 0 0 50%;\n  box-shadow: 0 0 24px black;\n  transition: all 0.35s;\n  overflow: hidden;\n\n  ",";\n"])),(function(e){return e.isHidden&&Object(Z.b)(va||(va=Object(Y.a)(["\n      transition-delay: 0.05s;\n      transform: translateX(-100%);\n      box-shadow: none;\n    "])))})),lo=function(e){var t=e.windowStack,n=e.menuHidden,i=e.allHidden;return Object(J.jsxs)(co,{"data-stack-type":"splitscreen",children:[Object(J.jsxs)(so,{isHidden:n||i,children:[Object(J.jsx)(gr,{}),Object(J.jsx)(ae.a,{children:t.map((function(e,n){return Object(J.jsx)(eo,{windowStack:t,index:n,isHidden:n<t.length-1},"window-".concat(e.id))}))})]}),Object(J.jsx)(oo,{isHidden:i})]})},uo=Z.c.div(xa||(xa=Object(Y.a)(["\n  z-index: 100;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n"]))),po=function(){var e=Te(),t=e.isConfigured,n=e.hasDevToken,i=ci(),r=i.windowStack,a=i.resetWindows,o=r.filter((function(e){return e.type===tn.SPLIT})),c=r.filter((function(e){return e.type===tn.FULL})),s=r.find((function(e){return e.type===tn.COVER_FLOW})),l=r.filter((function(e){return e.type===tn.ACTION_SHEET})),u=r.filter((function(e){return e.type===tn.POPUP})),d=t&&n;return Ie("menulongpress",a),Object(J.jsxs)("div",{children:[d?Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(Ba,{window:s}),Object(J.jsx)(lo,{windowStack:o,menuHidden:c.length>0,allHidden:!!s}),Object(J.jsx)(no,{windowStack:c}),Object(J.jsx)(Xa,{windowStack:l}),Object(J.jsx)(ro,{windowStack:u})]}):Object(J.jsx)(re,{message:"Missing developer token"}),Object(J.jsx)(uo,{})]})},bo=Object(Z.a)(Oa||(Oa=Object(Y.a)(['\n  * {\n    box-sizing: border-box;\n  }\n\n   body {\n      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n      font-size: 16px;\n      user-select: none;\n      -webkit-touch-callout: none;\n\n      @media (prefers-color-scheme: dark) {\n        background: black;\n      }\n   }\n']))),ho=Z.c.div(ga||(ga=Object(Y.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  @media screen and (min-width: 750px) {\n    height: 100vh;\n    display: flex;\n  }\n"]))),fo=Z.c.div(ma||(ma=Object(Y.a)(["\n  position: relative;\n  height: 100vh;\n  margin: auto;\n  max-height: 36.5em;\n  width: 370px;\n  border-radius: 30px;\n  box-shadow: inset 0 0 2.4em #555;\n  background: linear-gradient(180deg, #e3e3e3 0%, #d6d6d6 100%);\n  -webkit-box-reflect: below 0px -webkit-gradient(linear, left top, left bottom, from(transparent), color-stop(50%, transparent), to(rgba(250, 250, 250, 0.3)));\n  animation: descend 1.5s ease;\n\n  @media (prefers-color-scheme: dark) {\n    box-shadow: inset 0 0 2.4em black;\n  }\n\n  @media screen and (max-width: 400px) {\n    animation: none;\n    border-radius: 0;\n    -webkit-box-reflect: unset;\n  }\n\n  @keyframes descend {\n    0% {\n      transform: scale(0.3);\n      opacity: 0;\n    }\n\n    100% {\n      transform: scale(1);\n      opacity: 1;\n    }\n  }\n"]))),jo=Z.c.div(wa||(wa=Object(Y.a)(["\n  position: relative;\n  height: 260px;\n  margin: "," "," ",";\n  border: 4px solid black;\n  border-radius: ",";\n  overflow: hidden;\n  background: white;\n  animation: fadeFromBlack 0.5s;\n\n  @keyframes fadeFromBlack {\n    0% {\n      filter: brightness(0);\n    }\n  }\n\n  "," {\n    @media screen and (max-height: 750px) {\n      margin: "," "," ",";\n    }\n  }\n"])),ee.LG,ee.LG,ee.XL,ee.XS,$.SM,ee.SM,ee.SM,ee.XL),vo=function(){return Object(J.jsxs)(ho,{children:[Object(J.jsx)(bo,{}),Object(J.jsx)(Mi,{children:Object(J.jsxs)(fo,{children:[Object(J.jsx)(jo,{children:Object(J.jsx)(gi,{children:Object(J.jsx)(Ae,{children:Object(J.jsx)(ke,{children:Object(J.jsx)(oi,{children:Object(J.jsx)(po,{})})})})})}),Object(J.jsx)(za,{})]})})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));G.a.render(Object(J.jsx)(vo,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[48,1,2]]]);
//# sourceMappingURL=main.44d81c02.chunk.js.map